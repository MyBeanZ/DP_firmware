/* USER CODE BEGIN Header */
/**
  ******************************************************************************
  * @file           : main.c
  * @brief          : Main program body
  ******************************************************************************
  * @attention
  *
  * <h2><center>&copy; Copyright (c) 2020 STMicroelectronics.
  * All rights reserved.</center></h2>
  *
  * This software component is licensed by ST under Ultimate Liberty license
  * SLA0044, the "License"; You may not use this file except in compliance with
  * the License. You may obtain a copy of the License at:
  *                             www.st.com/SLA0044
  *
  ******************************************************************************
  */
/* USER CODE END Header */

/* Includes ------------------------------------------------------------------*/
#include "main.h"
#include "usb_device.h"

/* Private includes ----------------------------------------------------------*/
/* USER CODE BEGIN Includes */
#include "usbd_cdc_if.h"
#include <string.h> // strlen(), strok()
#include "arm_math.h"
#include <math.h>
#include <stdlib.h> //strof
/* USER CODE END Includes */

/* Private typedef -----------------------------------------------------------*/
/* USER CODE BEGIN PTD */

/* USER CODE END PTD */

/* Private define ------------------------------------------------------------*/
/* USER CODE BEGIN PD */
#define MEGA (1000000)
/* 64 vzorku take kvuli rychlosti zpracovani - pokud moc pomale -> 32 vzorku - 2 periody pro 100 kHz*/
#define ADC_BUF_LEN (2048) // pro frekvenci 100kHz cc 4,3 periody - 16 vzorkù na periodu - vzorkovací frekvence 1.4 Msps (Max)
#define DATA_LEN (64)
//#define CARRY_FREQ (100000)
/*(((42*MEGA)/2)/15) - 15 clocks per sample (12 bit ADC), 42 PCLK, ADC prescaler - 2 => 1.4 Msps*/
#define SAMPLE_FREQ (1.4*MEGA)
#define SIN_TAB_LEN (4096)
#define WAIT 33
/* ----------- DEFINICE VERZE ----------------*/
//#define FLOAT
#define KOROUT

#ifndef PI
#define PI 3.14159265358979f
#endif

/* USER CODE END PD */

/* Private macro -------------------------------------------------------------*/
/* USER CODE BEGIN PM */

/* USER CODE END PM */

/* Private variables ---------------------------------------------------------*/
ADC_HandleTypeDef hadc1;
ADC_HandleTypeDef hadc2;
ADC_HandleTypeDef hadc3;
DMA_HandleTypeDef hdma_adc1;
DMA_HandleTypeDef hdma_adc2;
DMA_HandleTypeDef hdma_adc3;

I2C_HandleTypeDef hi2c1;

I2S_HandleTypeDef hi2s3;

SPI_HandleTypeDef hspi1;

/* USER CODE BEGIN PV */
#ifndef FLOAT
static volatile q31_t adc_buf_1 [ADC_BUF_LEN]; // ADC1 - deklarece DMA bufferu
static volatile q31_t adc_buf_2 [ADC_BUF_LEN]; // ADC2
static volatile q31_t adc_buf_3 [ADC_BUF_LEN]; // ADC3

#else
static float32_t adc_buf_1 [ADC_BUF_LEN]; // ADC1 - deklarece DMA bufferu
static float32_t adc_buf_2 [ADC_BUF_LEN]; // ADC2
static float32_t adc_buf_3 [ADC_BUF_LEN]; // ADC3
#endif

volatile q31_t buff_short_adc_1 [ADC_BUF_LEN/2];
volatile q31_t buff_short_adc_2 [ADC_BUF_LEN/2];
volatile q31_t buff_short_adc_3 [ADC_BUF_LEN/2];
/*
volatile q31_t buff_short_adc_1_dc [ADC_BUF_LEN/2];
volatile q31_t buff_short_adc_2_dc [ADC_BUF_LEN/2];
volatile q31_t buff_short_adc_3_dc [ADC_BUF_LEN/2];*/

volatile float32_t buff_short_adc_1_dc [ADC_BUF_LEN/2];
volatile float32_t buff_short_adc_2_dc [ADC_BUF_LEN/2];
volatile float32_t buff_short_adc_3_dc [ADC_BUF_LEN/2];

volatile uint16_t test_data;

volatile uint16_t buff_process_toggle = 0;
uint16_t i;

const float sin_tab [4096] = {
		0,0.00153398018628477,0.00306795676296598,0.00460192612044857,0.00613588464915448,0.0076698287395311,0.00920375478205982,0.0107376591672645,0.0122715382857199,0.0138053885280604,0.0153392062849881,0.0168729879472817,0.0184067299058048,0.0199404285515144,0.0214740802754695,0.0230076814688394,0.0245412285229123,0.0260747178291039,0.0276081457789657,0.0291415087641937,0.0306748031766366,0.0322080254083046,0.0337411718513776,0.0352742388982139,0.0368072229413588,0.0383401203735527,0.0398729275877398,0.0414056409770767,0.0429382569349408,0.0444707718549387,0.0460031821309146,0.0475354841569593,0.049067674327418,0.0505997490368993,0.0521317046802833,0.0536635376527305,0.0551952443496899,0.0567268211669077,0.0582582645004358,0.0597895707466399,0.0613207363022086,0.0628517575641614,0.0643826309298575,0.0659133527970038,0.0674439195636641,0.0689743276282667,0.0705045733896139,0.0720346532468893,0.0735645635996674,0.0750943008479213,0.0766238613920315,0.0781532416327942,0.0796824379714301,0.0812114468095924,0.0827402645493757,0.0842688875933241,0.0857973123444399,0.0873255352061921,0.0888535525825246,0.090381360877865,0.0919089564971327,0.0934363358457478,0.094963495329639,0.0964904313552526,0.0980171403295606,0.0995436186600693,0.101069862754828,0.102595869022436,0.104121633872055,0.105647153713411,0.107172424956809,0.108697444013139,0.110222207293883,0.111746711211127,0.113270952177564,0.11479492660651,0.116318630911905,0.117842061508325,0.119365214810991,0.120888087235777,0.122410675199216,0.123932975118512,0.125454983411546,0.126976696496886,0.128498110793793,0.130019222722233,0.131540028702883,0.133060525157139,0.134580708507126,0.136100575175706,0.137620121586486,0.139139344163826,0.140658239332849,0.142176803519448,0.143695033150294,0.145212924652847,0.146730474455362,0.148247678986896,0.149764534677322,0.15128103795733,0.152797185258443,0.15431297301302,0.155828397654265,0.157343455616238,0.158858143333861,0.160372457242928,0.161886393780112,0.163399949382973,0.16491312048997,0.166425903540464,0.167938294974731,0.169450291233968,0.170961888760301,0.172473083996796,0.173983873387464,0.175494253377271,0.177004220412149,0.178513770938998,0.1800229014057,0.181531608261125,0.183039887955141,0.18454773693862,0.186055151663447,0.18756212858253,0.189068664149806,0.190574754820253,0.192080397049892,0.193585587295804,0.195090322016128,0.19659459767008,0.198098410717954,0.199601757621131,0.201104634842092,0.202607038844421,0.204108966092817,0.205610413053099,0.207111376192219,0.208611851978263,0.21011183688047,0.211611327369228,0.213110319916091,0.214608810993787,0.21610679707622,0.217604274638484,0.21910124015687,0.220597690108874,0.222093620973204,0.22358902922979,0.225083911359793,0.22657826384561,0.228072083170886,0.229565365820519,0.231058108280671,0.232550307038775,0.234041958583543,0.235533059404975,0.237023605994367,0.238513594844318,0.240003022448741,0.241491885302869,0.242980179903264,0.244467902747824,0.245955050335795,0.247441619167773,0.24892760574572,0.250413006572965,0.251897818154217,0.25338203699557,0.254865659604515,0.256348682489943,0.257831102162159,0.259312915132886,0.260794117915276,0.262274707023914,0.263754678974831,0.265234030285512,0.266712757474898,0.268190857063403,0.269668325572915,0.271145159526808,0.272621355449949,0.274096909868706,0.275571819310958,0.2770460803061,0.278519689385053,0.279992643080273,0.281464937925758,0.282936570457055,0.284407537211272,0.285877834727081,0.28734745954473,0.288816408206049,0.290284677254462,0.291752263234989,0.293219162694259,0.294685372180514,0.296150888243624,0.297615707435086,0.29907982630804,0.300543241417273,0.302005949319228,0.303467946572011,0.304929229735402,0.306389795370861,0.307849640041535,0.309308760312269,0.310767152749611,0.312224813921825,0.313681740398892,0.315137928752522,0.316593375556166,0.318048077385015,0.319502030816016,0.320955232427875,0.32240767880107,0.323859366517853,0.325310292162263,0.326760452320132,0.328209843579092,0.329658462528587,0.331106305759876,0.332553369866044,0.333999651442009,0.335445147084532,0.33688985339222,0.338333766965541,0.339776884406827,0.341219202320282,0.342660717311994,0.344101425989939,0.345541324963989,0.346980410845924,0.348418680249435,0.349856129790135,0.351292756085567,0.352728555755211,0.35416352542049,0.355597661704784,0.35703096123343,0.358463420633737,0.359895036534988,0.361325805568454,0.362755724367397,0.36418478956708,0.365612997804774,0.367040345719767,0.368466829953372,0.369892447148934,0.371317193951837,0.372741067009516,0.374164062971458,0.375586178489217,0.377007410216418,0.378427754808766,0.379847208924051,0.381265769222162,0.38268343236509,0.384100195016935,0.385516053843919,0.386931005514389,0.388345046698826,0.389758174069856,0.391170384302254,0.392581674072951,0.393992040061048,0.395401478947816,0.39680998741671,0.398217562153374,0.399624199845647,0.401029897183576,0.402434650859418,0.403838457567654,0.40524131400499,0.406643216870369,0.408044162864979,0.409444148692258,0.410843171057904,0.412241226669883,0.413638312238435,0.415034424476082,0.416429560097637,0.417823715820212,0.419216888363224,0.420609074448403,0.4220002707998,0.423390474143796,0.424779681209109,0.4261678887268,0.427555093430282,0.428941292055329,0.430326481340083,0.431710658025057,0.433093818853152,0.434475960569656,0.435857079922255,0.437237173661044,0.438616238538528,0.439994271309633,0.441371268731717,0.44274722756457,0.444122144570429,0.445496016513982,0.446868840162374,0.44824061228522,0.449611329654607,0.450980989045104,0.452349587233771,0.453717121000164,0.455083587126344,0.456448982396884,0.457813303598877,0.459176547521944,0.46053871095824,0.461899790702463,0.46325978355186,0.464618686306238,0.465976495767966,0.467333208741988,0.468688822035828,0.470043332459596,0.471396736825998,0.472749031950343,0.47410021465055,0.475450281747156,0.476799230063322,0.478147056424843,0.479493757660153,0.480839330600334,0.482183772079123,0.483527078932919,0.484869248000791,0.486210276124486,0.487550160148436,0.488888896919763,0.490226483288291,0.49156291610655,0.492898192229784,0.49423230851596,0.495565261825773,0.496897049022654,0.498227666972782,0.499557112545082,0.500885382611241,0.502212474045711,0.503538383725718,0.504863108531268,0.506186645345155,0.507508991052971,0.508830142543107,0.510150096706767,0.51146885043797,0.512786400633563,0.514102744193222,0.515417878019463,0.51673179901765,0.518044504095999,0.51935599016559,0.520666254140367,0.521975292937154,0.523283103475656,0.524589682678469,0.525895027471085,0.527199134781901,0.528502001542228,0.529803624686295,0.531104001151255,0.532403127877198,0.533701001807153,0.534997619887097,0.536292979065963,0.537587076295645,0.538879908531008,0.540171472729893,0.541461765853123,0.542750784864516,0.544038526730884,0.545324988422046,0.546610166910835,0.5478940591731,0.54917666218772,0.550457972936605,0.551737988404707,0.553016705580027,0.55429412145362,0.555570233019602,0.55684503727516,0.558118531220556,0.559390711859136,0.560661576197336,0.561931121244689,0.563199344013834,0.564466241520519,0.565731810783613,0.566996048825109,0.568258952670131,0.569520519346947,0.570780745886967,0.572039629324757,0.573297166698042,0.574553355047716,0.575808191417845,0.577061672855679,0.578313796411656,0.579564559139406,0.580813958095765,0.582061990340775,0.583308652937698,0.584553942953015,0.585797857456439,0.587040393520918,0.588281548222645,0.589521318641064,0.590759701858874,0.591996694962041,0.5932322950398,0.594466499184664,0.595699304492433,0.596930708062196,0.598160706996342,0.599389298400565,0.600616479383869,0.60184224705858,0.603066598540348,0.604289530948156,0.605511041404326,0.606731127034524,0.607949784967774,0.609167012336453,0.610382806276309,0.611597163926462,0.61281008242941,0.614021558931038,0.615231590580627,0.616440174530854,0.617647307937804,0.618852987960976,0.620057211763289,0.621259976511088,0.62246127937415,0.623661117525695,0.624859488142386,0.626056388404344,0.627251815495144,0.628445766601833,0.629638238914927,0.630829229628424,0.632018735939809,0.633206755050057,0.634393284163645,0.635578320488556,0.636761861236284,0.637943903621844,0.639124444863776,0.640303482184152,0.641481012808583,0.642657033966227,0.643831542889791,0.645004536815544,0.646176012983316,0.647345968636512,0.648514401022112,0.649681307390683,0.650846684996381,0.65201053109696,0.653172842953777,0.6543336178318,0.655492852999615,0.656650545729429,0.657806693297079,0.658961292982037,0.66011434206742,0.661265837839992,0.662415777590172,0.66356415861204,0.664710978203345,0.66585623366551,0.666999922303637,0.668142041426518,0.669282588346636,0.670421560380173,0.671558954847018,0.672694769070773,0.673829000378756,0.674961646102012,0.676092703575316,0.67722217013718,0.678350043129861,0.679476319899365,0.680600997795453,0.68172407417165,0.682845546385248,0.683965411797315,0.6850836677727,0.686200311680039,0.687315340891759,0.68842875278409,0.689540544737067,0.690650714134535,0.691759258364158,0.692866174817425,0.693971460889654,0.695075113980001,0.696177131491463,0.697277510830887,0.698376249408973,0.699473344640284,0.700568793943248,0.701662594740168,0.702754744457225,0.703845240524485,0.704934080375905,0.70602126144934,0.707106781186547,0.708190637033195,0.709272826438866,0.710353346857062,0.711432195745216,0.712509370564692,0.713584868780794,0.714658687862769,0.715730825283819,0.716801278521099,0.717870045055732,0.718937122372804,0.720002507961382,0.721066199314508,0.722128193929215,0.723188489306527,0.724247082951467,0.725303972373061,0.726359155084346,0.727412628602376,0.728464390448225,0.729514438146997,0.730562769227828,0.731609381223893,0.732654271672413,0.73369743811466,0.734738878095963,0.735778589165713,0.73681656887737,0.737852814788466,0.738887324460615,0.739920095459516,0.740951125354959,0.741980411720831,0.743007952135122,0.744033744179929,0.745057785441466,0.746080073510064,0.74710060598018,0.748119380450404,0.749136394523459,0.750151645806215,0.751165131909686,0.752176850449043,0.753186799043613,0.754194975316889,0.755201376896537,0.756206001414395,0.757208846506485,0.758209909813015,0.759209188978388,0.760206681651202,0.761202385484262,0.762196298134579,0.763188417263381,0.764178740536117,0.765167265622459,0.766153990196313,0.76713891193582,0.768122028523365,0.76910333764558,0.770082836993348,0.771060524261814,0.772036397150384,0.773010453362737,0.773982690606823,0.774953106594874,0.775921699043408,0.776888465673232,0.777853404209453,0.778816512381476,0.779777787923014,0.780737228572094,0.781694832071059,0.782650596166576,0.783604518609638,0.784556597155575,0.785506829564054,0.786455213599086,0.787401747029031,0.788346427626606,0.789289253168886,0.79023022143731,0.79116933021769,0.792106577300212,0.793041960479444,0.793975477554337,0.794907126328237,0.795836904608884,0.796764810208419,0.797690840943391,0.798614994634761,0.799537269107905,0.800457662192623,0.80137617172314,0.802292795538116,0.803207531480645,0.804120377398266,0.805031331142964,0.805940390571176,0.806847553543799,0.80775281792619,0.808656181588175,0.809557642404051,0.810457198252595,0.811354847017064,0.812250586585204,0.813144414849253,0.814036329705948,0.814926329056527,0.815814410806734,0.816700572866828,0.817584813151584,0.818467129580299,0.819347520076797,0.820225982569435,0.821102514991105,0.821977115279242,0.822849781375826,0.823720511227391,0.824589302785025,0.825456154004377,0.826321062845664,0.827184027273669,0.828045045257756,0.828904114771865,0.829761233794523,0.830616400308846,0.831469612302545,0.83232086776793,0.833170164701913,0.834017501106018,0.83486287498638,0.835706284353753,0.836547727223512,0.837387201615662,0.838224705554838,0.839060237070313,0.839893794195999,0.840725374970458,0.841554977436898,0.842382599643186,0.843208239641845,0.844031895490066,0.844853565249707,0.845673246987299,0.846490938774052,0.847306638685858,0.848120344803297,0.84893205521164,0.849741768000852,0.850549481265603,0.851355193105265,0.85215890162392,0.852960604930364,0.853760301138111,0.854557988365401,0.855353664735196,0.856147328375194,0.856938977417829,0.857728610000272,0.858516224264443,0.859301818357008,0.86008539042939,0.860866938637767,0.861646461143081,0.862423956111041,0.863199421712124,0.863972856121587,0.864744257519462,0.865513624090569,0.866280954024513,0.867046245515693,0.867809496763303,0.868570705971341,0.869329871348607,0.870086991108711,0.870842063470079,0.871595086655951,0.872346058894391,0.87309497841829,0.873841843465367,0.874586652278176,0.875329403104111,0.876070094195407,0.876808723809146,0.877545290207261,0.878279791656541,0.879012226428633,0.879742592800047,0.880470889052161,0.881197113471222,0.881921264348355,0.882643339979563,0.883363338665732,0.884081258712635,0.884797098430938,0.8855108561362,0.886222530148881,0.886932118794342,0.887639620402854,0.888345033309596,0.889048355854665,0.889749586383073,0.890448723244758,0.891145764794583,0.891840709392343,0.892533555402765,0.893224301195515,0.893912945145203,0.894599485631383,0.895283921038558,0.895966249756185,0.89664647017868,0.897324580705418,0.89800057974074,0.898674465693954,0.899346236979341,0.90001589201616,0.900683429228647,0.901348847046022,0.902012143902493,0.902673318237259,0.903332368494512,0.903989293123443,0.904644090578246,0.905296759318119,0.905947297807268,0.906595704514915,0.907241977915296,0.907886116487666,0.908528118716306,0.909167983090522,0.909805708104652,0.910441292258067,0.911074734055176,0.91170603200543,0.912335184623323,0.912962190428398,0.913587047945251,0.914209755703531,0.914830312237946,0.915448716088268,0.916064965799332,0.916679059921043,0.917290997008378,0.91790077562139,0.918508394325212,0.919113851690058,0.919717146291227,0.92031827670911,0.92091724152919,0.921514039342042,0.922108668743345,0.922701128333879,0.923291416719528,0.923879532511287,0.924465474325263,0.925049240782678,0.925630830509873,0.926210242138311,0.926787474304582,0.927362525650401,0.927935394822618,0.928506080473216,0.929074581259316,0.929640895843181,0.930205022892219,0.930766961078984,0.93132670908118,0.931884265581668,0.932439629268462,0.932992798834739,0.933543772978836,0.934092550404259,0.934639129819681,0.935183509938947,0.93572568948108,0.936265667170278,0.936803441735922,0.937339011912575,0.93787237643999,0.938403534063108,0.938932483532064,0.93945922360219,0.939983753034014,0.940506070593268,0.941026175050889,0.941544065183021,0.942059739771017,0.942573197601447,0.943084437466093,0.94359345816196,0.944100258491273,0.94460483726148,0.945107193285261,0.945607325380521,0.946105232370403,0.946600913083284,0.947094366352777,0.947585591017741,0.948074585922276,0.94856134991573,0.949045881852701,0.949528180593037,0.950008245001843,0.950486073949482,0.950961666311575,0.951435020969008,0.951906136807932,0.952375012719766,0.952841647601199,0.953306040354194,0.95376818988599,0.954228095109106,0.954685754941338,0.955141168305771,0.955594334130771,0.956045251349996,0.956493918902395,0.956940335732209,0.957384500788976,0.957826413027533,0.958266071408018,0.958703474895872,0.959138622461842,0.959571513081985,0.960002145737666,0.960430519415566,0.96085663310768,0.961280485811321,0.961702076529123,0.962121404269042,0.962538468044359,0.962953266873684,0.963365799780954,0.96377606579544,0.964184063951746,0.964589793289813,0.96499325285492,0.965394441697689,0.965793358874084,0.966190003445413,0.966584374478333,0.966976471044852,0.967366292222329,0.967753837093476,0.968139104746362,0.968522094274417,0.968902804776429,0.969281235356549,0.969657385124292,0.970031253194544,0.970402838687556,0.97077214072895,0.971139158449725,0.971503890986252,0.971866337480279,0.972226497078936,0.972584368934732,0.97293995220556,0.973293246054698,0.973644249650812,0.973992962167956,0.974339382785576,0.974683510688511,0.975025345066994,0.975364885116657,0.975702130038529,0.976037079039039,0.976369731330021,0.976700086128712,0.977028142657754,0.9773539001452,0.97767735782451,0.977998514934557,0.978317370719628,0.978633924429423,0.978948175319062,0.979260122649082,0.979569765685441,0.979877103699518,0.980182135968117,0.980484861773469,0.98078528040323,0.981083391150487,0.981379193313755,0.981672686196983,0.981963869109555,0.982252741366289,0.982539302287441,0.982823551198705,0.983105487431216,0.983385110321551,0.98366241921173,0.983937413449219,0.984210092386929,0.984480455383221,0.984748501801904,0.98501423101224,0.985277642388941,0.985538735312176,0.985797509167567,0.986053963346195,0.986308097244599,0.986559910264775,0.986809401814185,0.987056571305751,0.987301418157858,0.987543941794359,0.987784141644572,0.988022017143284,0.988257567730749,0.988490792852697,0.988721691960324,0.988950264510303,0.989176509964781,0.98940042779138,0.989622017463201,0.989841278458821,0.990058210262297,0.990272812363169,0.990485084256457,0.990695025442665,0.99090263542778,0.991107913723277,0.991310859846115,0.991511473318744,0.9917097536691,0.991905700430609,0.992099313142192,0.992290591348257,0.99247953459871,0.992666142448948,0.992850414459865,0.993032350197851,0.993211949234795,0.993389211148081,0.993564135520595,0.993736721940725,0.993906970002356,0.994074879304879,0.994240449453188,0.994403680057679,0.994564570734255,0.994723121104326,0.994879330794806,0.995033199438119,0.995184726672197,0.995333912140482,0.995480755491927,0.995625256380994,0.99576741446766,0.995907229417412,0.996044700901252,0.996179828595697,0.996312612182778,0.996443051350043,0.996571145790555,0.996696895202896,0.996820299291166,0.996941357764982,0.997060070339483,0.997176436735326,0.99729045667869,0.997402129901275,0.997511456140303,0.99761843513852,0.997723066644192,0.997825350411112,0.997925286198596,0.998022873771486,0.998118112900149,0.998211003360478,0.998301544933893,0.99838973740734,0.998475580573295,0.998559074229759,0.998640218180265,0.998719012233873,0.998795456205172,0.998869549914284,0.998941293186857,0.999010685854073,0.999077727752645,0.999142418724817,0.999204758618364,0.999264747286594,0.99932238458835,0.999377670388003,0.999430604555462,0.999481186966167,0.999529417501093,0.999575296046749,0.999618822495179,0.999659996743959,0.999698818696204,0.999735288260562,0.999769405351215,0.999801169887884,0.999830581795823,0.999857641005824,0.999882347454213,0.999904701082853,0.999924701839145,0.999942349676024,0.999957644551964,0.999970586430974,0.999981175282601,0.999989411081928,0.999995293809576,0.999998823451702,1,0.999998823451702,0.999995293809576,0.999989411081928,0.999981175282601,0.999970586430974,0.999957644551964,0.999942349676024,0.999924701839145,0.999904701082853,0.999882347454213,0.999857641005824,0.999830581795823,0.999801169887884,0.999769405351215,0.999735288260562,0.999698818696204,0.999659996743959,0.999618822495179,0.999575296046749,0.999529417501093,0.999481186966167,0.999430604555462,0.999377670388003,0.99932238458835,0.999264747286594,0.999204758618364,0.999142418724817,0.999077727752645,0.999010685854073,0.998941293186857,0.998869549914284,0.998795456205172,0.998719012233873,0.998640218180265,0.998559074229759,0.998475580573295,0.99838973740734,0.998301544933893,0.998211003360478,0.998118112900149,0.998022873771486,0.997925286198596,0.997825350411112,0.997723066644192,0.99761843513852,0.997511456140303,0.997402129901275,0.99729045667869,0.997176436735326,0.997060070339483,0.996941357764982,0.996820299291166,0.996696895202896,0.996571145790555,0.996443051350043,0.996312612182778,0.996179828595697,0.996044700901252,0.995907229417412,0.99576741446766,0.995625256380994,0.995480755491927,0.995333912140482,0.995184726672197,0.995033199438119,0.994879330794806,0.994723121104326,0.994564570734255,0.994403680057679,0.994240449453188,0.994074879304879,0.993906970002356,0.993736721940725,0.993564135520595,0.993389211148081,0.993211949234795,0.993032350197851,0.992850414459865,0.992666142448948,0.99247953459871,0.992290591348257,0.992099313142192,0.991905700430609,0.9917097536691,0.991511473318744,0.991310859846115,0.991107913723277,0.99090263542778,0.990695025442665,0.990485084256457,0.990272812363169,0.990058210262297,0.989841278458821,0.989622017463201,0.98940042779138,0.989176509964781,0.988950264510303,0.988721691960324,0.988490792852697,0.988257567730749,0.988022017143284,0.987784141644572,0.987543941794359,0.987301418157858,0.987056571305751,0.986809401814186,0.986559910264776,0.986308097244599,0.986053963346195,0.985797509167567,0.985538735312176,0.985277642388941,0.98501423101224,0.984748501801904,0.984480455383221,0.984210092386929,0.983937413449219,0.98366241921173,0.983385110321551,0.983105487431216,0.982823551198705,0.982539302287441,0.982252741366289,0.981963869109555,0.981672686196983,0.981379193313755,0.981083391150487,0.98078528040323,0.980484861773469,0.980182135968117,0.979877103699518,0.979569765685441,0.979260122649082,0.978948175319062,0.978633924429423,0.978317370719628,0.977998514934557,0.97767735782451,0.9773539001452,0.977028142657754,0.976700086128712,0.976369731330021,0.976037079039039,0.975702130038529,0.975364885116657,0.975025345066994,0.974683510688511,0.974339382785576,0.973992962167956,0.973644249650812,0.973293246054698,0.97293995220556,0.972584368934732,0.972226497078936,0.971866337480279,0.971503890986252,0.971139158449725,0.97077214072895,0.970402838687556,0.970031253194544,0.969657385124292,0.969281235356549,0.968902804776429,0.968522094274417,0.968139104746362,0.967753837093476,0.967366292222329,0.966976471044852,0.966584374478333,0.966190003445413,0.965793358874084,0.965394441697689,0.96499325285492,0.964589793289813,0.964184063951746,0.96377606579544,0.963365799780954,0.962953266873684,0.962538468044359,0.962121404269042,0.961702076529123,0.961280485811321,0.96085663310768,0.960430519415566,0.960002145737666,0.959571513081985,0.959138622461842,0.958703474895872,0.958266071408018,0.957826413027533,0.957384500788976,0.956940335732209,0.956493918902395,0.956045251349997,0.955594334130771,0.955141168305771,0.954685754941338,0.954228095109106,0.95376818988599,0.953306040354194,0.952841647601199,0.952375012719766,0.951906136807932,0.951435020969008,0.950961666311575,0.950486073949482,0.950008245001843,0.949528180593037,0.949045881852701,0.94856134991573,0.948074585922276,0.947585591017741,0.947094366352777,0.946600913083284,0.946105232370403,0.945607325380521,0.945107193285261,0.94460483726148,0.944100258491273,0.94359345816196,0.943084437466093,0.942573197601447,0.942059739771017,0.941544065183021,0.941026175050889,0.940506070593268,0.939983753034014,0.93945922360219,0.938932483532064,0.938403534063108,0.93787237643999,0.937339011912575,0.936803441735922,0.936265667170278,0.93572568948108,0.935183509938948,0.934639129819681,0.934092550404259,0.933543772978836,0.932992798834739,0.932439629268462,0.931884265581668,0.931326709081181,0.930766961078984,0.930205022892219,0.929640895843181,0.929074581259316,0.928506080473216,0.927935394822618,0.927362525650401,0.926787474304582,0.926210242138311,0.925630830509873,0.925049240782678,0.924465474325263,0.923879532511287,0.923291416719528,0.922701128333879,0.922108668743345,0.921514039342042,0.92091724152919,0.920318276709111,0.919717146291227,0.919113851690058,0.918508394325212,0.91790077562139,0.917290997008378,0.916679059921043,0.916064965799332,0.915448716088268,0.914830312237946,0.914209755703531,0.913587047945251,0.912962190428398,0.912335184623323,0.91170603200543,0.911074734055176,0.910441292258067,0.909805708104652,0.909167983090522,0.908528118716306,0.907886116487666,0.907241977915296,0.906595704514915,0.905947297807269,0.905296759318119,0.904644090578246,0.903989293123443,0.903332368494512,0.902673318237259,0.902012143902493,0.901348847046022,0.900683429228647,0.90001589201616,0.899346236979342,0.898674465693954,0.89800057974074,0.897324580705418,0.89664647017868,0.895966249756185,0.895283921038557,0.894599485631383,0.893912945145203,0.893224301195515,0.892533555402765,0.891840709392343,0.891145764794583,0.890448723244758,0.889749586383073,0.889048355854665,0.888345033309596,0.887639620402854,0.886932118794342,0.886222530148881,0.8855108561362,0.884797098430938,0.884081258712635,0.883363338665732,0.882643339979563,0.881921264348355,0.881197113471222,0.880470889052161,0.879742592800047,0.879012226428634,0.878279791656542,0.877545290207261,0.876808723809146,0.876070094195407,0.875329403104111,0.874586652278176,0.873841843465367,0.87309497841829,0.872346058894392,0.871595086655951,0.870842063470079,0.870086991108711,0.869329871348607,0.868570705971341,0.867809496763303,0.867046245515693,0.866280954024513,0.865513624090569,0.864744257519462,0.863972856121587,0.863199421712124,0.862423956111041,0.861646461143081,0.860866938637767,0.86008539042939,0.859301818357008,0.858516224264443,0.857728610000272,0.856938977417829,0.856147328375195,0.855353664735196,0.854557988365401,0.853760301138112,0.852960604930364,0.85215890162392,0.851355193105265,0.850549481265603,0.849741768000853,0.84893205521164,0.848120344803297,0.847306638685859,0.846490938774052,0.845673246987299,0.844853565249707,0.844031895490066,0.843208239641845,0.842382599643186,0.841554977436898,0.840725374970458,0.839893794196,0.839060237070313,0.838224705554838,0.837387201615662,0.836547727223512,0.835706284353753,0.83486287498638,0.834017501106018,0.833170164701913,0.83232086776793,0.831469612302545,0.830616400308846,0.829761233794523,0.828904114771865,0.828045045257756,0.827184027273669,0.826321062845664,0.825456154004378,0.824589302785025,0.823720511227392,0.822849781375826,0.821977115279241,0.821102514991105,0.820225982569435,0.819347520076797,0.818467129580299,0.817584813151584,0.816700572866828,0.815814410806734,0.814926329056527,0.814036329705949,0.813144414849254,0.812250586585204,0.811354847017064,0.810457198252595,0.809557642404051,0.808656181588175,0.80775281792619,0.806847553543799,0.805940390571176,0.805031331142964,0.804120377398266,0.803207531480645,0.802292795538116,0.80137617172314,0.800457662192623,0.799537269107905,0.798614994634761,0.797690840943391,0.796764810208419,0.795836904608884,0.794907126328237,0.793975477554337,0.793041960479444,0.792106577300212,0.79116933021769,0.79023022143731,0.789289253168886,0.788346427626606,0.787401747029031,0.786455213599086,0.785506829564054,0.784556597155575,0.783604518609638,0.782650596166576,0.781694832071059,0.780737228572095,0.779777787923014,0.778816512381476,0.777853404209453,0.776888465673232,0.775921699043408,0.774953106594874,0.773982690606823,0.773010453362737,0.772036397150385,0.771060524261814,0.770082836993348,0.76910333764558,0.768122028523366,0.76713891193582,0.766153990196313,0.765167265622459,0.764178740536117,0.763188417263381,0.762196298134579,0.761202385484262,0.760206681651202,0.759209188978388,0.758209909813015,0.757208846506485,0.756206001414395,0.755201376896536,0.754194975316889,0.753186799043613,0.752176850449043,0.751165131909687,0.750151645806215,0.749136394523459,0.748119380450404,0.74710060598018,0.746080073510064,0.745057785441466,0.744033744179929,0.743007952135122,0.741980411720831,0.740951125354959,0.739920095459516,0.738887324460615,0.737852814788466,0.73681656887737,0.735778589165714,0.734738878095964,0.73369743811466,0.732654271672413,0.731609381223893,0.730562769227828,0.729514438146997,0.728464390448225,0.727412628602376,0.726359155084346,0.725303972373061,0.724247082951467,0.723188489306528,0.722128193929215,0.721066199314508,0.720002507961382,0.718937122372804,0.717870045055732,0.7168012785211,0.715730825283819,0.714658687862769,0.713584868780794,0.712509370564692,0.711432195745217,0.710353346857062,0.709272826438866,0.708190637033196,0.707106781186548,0.70602126144934,0.704934080375905,0.703845240524485,0.702754744457225,0.701662594740169,0.700568793943248,0.699473344640284,0.698376249408973,0.697277510830887,0.696177131491463,0.695075113980001,0.693971460889654,0.692866174817425,0.691759258364158,0.690650714134535,0.689540544737067,0.68842875278409,0.687315340891759,0.686200311680039,0.6850836677727,0.683965411797316,0.682845546385248,0.68172407417165,0.680600997795453,0.679476319899365,0.678350043129861,0.677222170137181,0.676092703575316,0.674961646102012,0.673829000378756,0.672694769070773,0.671558954847019,0.670421560380173,0.669282588346636,0.668142041426519,0.666999922303638,0.66585623366551,0.664710978203345,0.66356415861204,0.662415777590172,0.661265837839992,0.66011434206742,0.658961292982038,0.657806693297079,0.656650545729429,0.655492852999616,0.654333617831801,0.653172842953777,0.65201053109696,0.650846684996381,0.649681307390683,0.648514401022113,0.647345968636512,0.646176012983317,0.645004536815544,0.643831542889791,0.642657033966227,0.641481012808583,0.640303482184152,0.639124444863776,0.637943903621844,0.636761861236284,0.635578320488556,0.634393284163645,0.633206755050057,0.632018735939809,0.630829229628424,0.629638238914927,0.628445766601833,0.627251815495144,0.626056388404344,0.624859488142386,0.623661117525695,0.62246127937415,0.621259976511088,0.620057211763289,0.618852987960976,0.617647307937804,0.616440174530854,0.615231590580627,0.614021558931038,0.61281008242941,0.611597163926462,0.61038280627631,0.609167012336453,0.607949784967774,0.606731127034525,0.605511041404326,0.604289530948156,0.603066598540348,0.60184224705858,0.600616479383869,0.599389298400565,0.598160706996342,0.596930708062197,0.595699304492433,0.594466499184664,0.5932322950398,0.591996694962041,0.590759701858874,0.589521318641064,0.588281548222645,0.587040393520918,0.585797857456439,0.584553942953015,0.583308652937699,0.582061990340776,0.580813958095765,0.579564559139406,0.578313796411656,0.577061672855679,0.575808191417845,0.574553355047716,0.573297166698042,0.572039629324757,0.570780745886967,0.569520519346947,0.568258952670132,0.566996048825109,0.565731810783613,0.564466241520519,0.563199344013834,0.56193112124469,0.560661576197336,0.559390711859136,0.558118531220556,0.55684503727516,0.555570233019602,0.55429412145362,0.553016705580028,0.551737988404708,0.550457972936605,0.54917666218772,0.5478940591731,0.546610166910835,0.545324988422046,0.544038526730884,0.542750784864516,0.541461765853123,0.540171472729893,0.538879908531008,0.537587076295646,0.536292979065963,0.534997619887097,0.533701001807153,0.532403127877198,0.531104001151255,0.529803624686295,0.528502001542228,0.527199134781901,0.525895027471085,0.524589682678469,0.523283103475657,0.521975292937155,0.520666254140367,0.51935599016559,0.518044504095999,0.51673179901765,0.515417878019463,0.514102744193222,0.512786400633563,0.511468850437971,0.510150096706767,0.508830142543107,0.507508991052971,0.506186645345155,0.504863108531268,0.503538383725718,0.502212474045711,0.500885382611241,0.499557112545082,0.498227666972782,0.496897049022655,0.495565261825773,0.49423230851596,0.492898192229784,0.49156291610655,0.490226483288291,0.488888896919763,0.487550160148436,0.486210276124487,0.484869248000791,0.483527078932919,0.482183772079123,0.480839330600334,0.479493757660153,0.478147056424843,0.476799230063322,0.475450281747156,0.47410021465055,0.472749031950343,0.471396736825998,0.470043332459596,0.468688822035828,0.467333208741989,0.465976495767966,0.464618686306238,0.46325978355186,0.461899790702463,0.46053871095824,0.459176547521944,0.457813303598877,0.456448982396884,0.455083587126344,0.453717121000164,0.452349587233771,0.450980989045104,0.449611329654607,0.44824061228522,0.446868840162374,0.445496016513982,0.444122144570429,0.44274722756457,0.441371268731717,0.439994271309633,0.438616238538528,0.437237173661044,0.435857079922256,0.434475960569656,0.433093818853152,0.431710658025057,0.430326481340083,0.42894129205533,0.427555093430282,0.4261678887268,0.424779681209109,0.423390474143796,0.4220002707998,0.420609074448403,0.419216888363224,0.417823715820212,0.416429560097637,0.415034424476082,0.413638312238435,0.412241226669883,0.410843171057904,0.409444148692258,0.408044162864979,0.406643216870369,0.40524131400499,0.403838457567654,0.402434650859419,0.401029897183576,0.399624199845647,0.398217562153374,0.39680998741671,0.395401478947817,0.393992040061048,0.392581674072951,0.391170384302254,0.389758174069856,0.388345046698827,0.386931005514389,0.385516053843919,0.384100195016935,0.38268343236509,0.381265769222162,0.379847208924051,0.378427754808766,0.377007410216418,0.375586178489217,0.374164062971458,0.372741067009516,0.371317193951838,0.369892447148934,0.368466829953373,0.367040345719767,0.365612997804774,0.36418478956708,0.362755724367397,0.361325805568454,0.359895036534988,0.358463420633737,0.35703096123343,0.355597661704784,0.35416352542049,0.352728555755211,0.351292756085567,0.349856129790135,0.348418680249435,0.346980410845924,0.345541324963989,0.344101425989939,0.342660717311994,0.341219202320283,0.339776884406827,0.338333766965541,0.33688985339222,0.335445147084532,0.333999651442009,0.332553369866044,0.331106305759876,0.329658462528587,0.328209843579093,0.326760452320132,0.325310292162263,0.323859366517853,0.32240767880107,0.320955232427875,0.319502030816016,0.318048077385015,0.316593375556166,0.315137928752523,0.313681740398891,0.312224813921825,0.310767152749612,0.309308760312269,0.307849640041535,0.306389795370861,0.304929229735403,0.303467946572011,0.302005949319228,0.300543241417274,0.299079826308041,0.297615707435086,0.296150888243624,0.294685372180514,0.293219162694259,0.291752263234989,0.290284677254462,0.28881640820605,0.28734745954473,0.285877834727081,0.284407537211272,0.282936570457055,0.281464937925758,0.279992643080273,0.278519689385053,0.2770460803061,0.275571819310958,0.274096909868706,0.272621355449949,0.271145159526808,0.269668325572915,0.268190857063403,0.266712757474898,0.265234030285512,0.263754678974832,0.262274707023914,0.260794117915276,0.259312915132886,0.257831102162159,0.256348682489943,0.254865659604515,0.25338203699557,0.251897818154217,0.250413006572965,0.24892760574572,0.247441619167773,0.245955050335795,0.244467902747824,0.242980179903264,0.241491885302869,0.240003022448742,0.238513594844319,0.237023605994367,0.235533059404976,0.234041958583544,0.232550307038775,0.231058108280671,0.229565365820519,0.228072083170886,0.22657826384561,0.225083911359793,0.22358902922979,0.222093620973204,0.220597690108874,0.21910124015687,0.217604274638484,0.216106797076219,0.214608810993787,0.213110319916091,0.211611327369228,0.21011183688047,0.208611851978264,0.207111376192219,0.205610413053099,0.204108966092817,0.202607038844421,0.201104634842092,0.199601757621131,0.198098410717954,0.19659459767008,0.195090322016129,0.193585587295804,0.192080397049892,0.190574754820253,0.189068664149806,0.18756212858253,0.186055151663447,0.18454773693862,0.183039887955141,0.181531608261125,0.1800229014057,0.178513770938997,0.177004220412149,0.175494253377271,0.173983873387464,0.172473083996796,0.170961888760301,0.169450291233968,0.167938294974731,0.166425903540464,0.16491312048997,0.163399949382973,0.161886393780112,0.160372457242928,0.158858143333861,0.157343455616239,0.155828397654265,0.15431297301302,0.152797185258444,0.15128103795733,0.149764534677321,0.148247678986896,0.146730474455362,0.145212924652847,0.143695033150295,0.142176803519448,0.14065823933285,0.139139344163826,0.137620121586486,0.136100575175706,0.134580708507126,0.133060525157139,0.131540028702883,0.130019222722233,0.128498110793793,0.126976696496886,0.125454983411546,0.123932975118512,0.122410675199216,0.120888087235777,0.119365214810992,0.117842061508325,0.116318630911905,0.11479492660651,0.113270952177564,0.111746711211127,0.110222207293883,0.108697444013139,0.107172424956809,0.105647153713411,0.104121633872055,0.102595869022437,0.101069862754828,0.0995436186600693,0.0980171403295608,0.0964904313552527,0.0949634953296389,0.093436335845748,0.0919089564971328,0.0903813608778653,0.0888535525825248,0.0873255352061921,0.0857973123444402,0.0842688875933242,0.0827402645493756,0.0812114468095927,0.0796824379714302,0.0781532416327941,0.0766238613920317,0.0750943008479213,0.0735645635996677,0.0720346532468895,0.0705045733896139,0.068974327628267,0.0674439195636642,0.0659133527970038,0.0643826309298577,0.0628517575641615,0.0613207363022085,0.0597895707466401,0.0582582645004358,0.0567268211669081,0.0551952443496901,0.0536635376527305,0.0521317046802836,0.0505997490368994,0.049067674327418,0.0475354841569595,0.0460031821309147,0.0444707718549386,0.042938256934941,0.0414056409770768,0.0398729275877401,0.0383401203735529,0.0368072229413588,0.0352742388982142,0.0337411718513777,0.0322080254083045,0.0306748031766369,0.0291415087641938,0.0276081457789657,0.0260747178291041,0.0245412285229123,0.0230076814688397,0.0214740802754697,0.0199404285515144,0.0184067299058051,0.0168729879472818,0.0153392062849881,0.0138053885280606,0.01227153828572,0.0107376591672644,0.00920375478206002,0.00766982873953114,0.0061358846491548,0.00460192612044873,0.00306795676296598,0.00153398018628505,1.22464679914735e-16,-0.0015339801862848,-0.00306795676296573,-0.00460192612044849,-0.00613588464915455,-0.00766982873953089,-0.00920375478205978,-0.0107376591672642,-0.0122715382857198,-0.0138053885280604,-0.0153392062849878,-0.0168729879472816,-0.0184067299058049,-0.0199404285515142,-0.0214740802754694,-0.0230076814688394,-0.0245412285229121,-0.0260747178291039,-0.0276081457789654,-0.0291415087641936,-0.0306748031766366,-0.0322080254083043,-0.0337411718513775,-0.035274238898214,-0.0368072229413586,-0.0383401203735526,-0.0398729275877399,-0.0414056409770765,-0.0429382569349408,-0.0444707718549383,-0.0460031821309145,-0.0475354841569593,-0.0490676743274177,-0.0505997490368991,-0.0521317046802834,-0.0536635376527303,-0.0551952443496899,-0.0567268211669078,-0.0582582645004356,-0.0597895707466398,-0.0613207363022082,-0.0628517575641612,-0.0643826309298575,-0.0659133527970035,-0.0674439195636639,-0.0689743276282668,-0.0705045733896136,-0.0720346532468892,-0.0735645635996675,-0.0750943008479211,-0.0766238613920314,-0.0781532416327939,-0.0796824379714299,-0.0812114468095924,-0.0827402645493754,-0.0842688875933239,-0.0857973123444399,-0.0873255352061918,-0.0888535525825245,-0.0903813608778651,-0.0919089564971325,-0.0934363358457477,-0.0949634953296387,-0.0964904313552524,-0.0980171403295606,-0.099543618660069,-0.101069862754828,-0.102595869022436,-0.104121633872054,-0.105647153713411,-0.107172424956809,-0.108697444013138,-0.110222207293883,-0.111746711211126,-0.113270952177564,-0.11479492660651,-0.116318630911904,-0.117842061508325,-0.119365214810991,-0.120888087235777,-0.122410675199216,-0.123932975118512,-0.125454983411546,-0.126976696496886,-0.128498110793793,-0.130019222722233,-0.131540028702883,-0.133060525157139,-0.134580708507126,-0.136100575175706,-0.137620121586486,-0.139139344163826,-0.140658239332849,-0.142176803519448,-0.143695033150294,-0.145212924652847,-0.146730474455362,-0.148247678986896,-0.149764534677321,-0.15128103795733,-0.152797185258443,-0.15431297301302,-0.155828397654265,-0.157343455616238,-0.158858143333861,-0.160372457242928,-0.161886393780111,-0.163399949382973,-0.16491312048997,-0.166425903540464,-0.167938294974731,-0.169450291233968,-0.170961888760301,-0.172473083996796,-0.173983873387464,-0.175494253377271,-0.177004220412149,-0.178513770938997,-0.180022901405699,-0.181531608261125,-0.183039887955141,-0.184547736938619,-0.186055151663447,-0.187562128582529,-0.189068664149806,-0.190574754820253,-0.192080397049892,-0.193585587295804,-0.195090322016128,-0.19659459767008,-0.198098410717954,-0.199601757621131,-0.201104634842092,-0.202607038844421,-0.204108966092817,-0.205610413053099,-0.207111376192219,-0.208611851978263,-0.21011183688047,-0.211611327369228,-0.213110319916091,-0.214608810993787,-0.216106797076219,-0.217604274638483,-0.21910124015687,-0.220597690108873,-0.222093620973203,-0.22358902922979,-0.225083911359793,-0.22657826384561,-0.228072083170886,-0.229565365820519,-0.231058108280671,-0.232550307038775,-0.234041958583543,-0.235533059404976,-0.237023605994367,-0.238513594844318,-0.240003022448742,-0.241491885302869,-0.242980179903264,-0.244467902747824,-0.245955050335794,-0.247441619167773,-0.24892760574572,-0.250413006572965,-0.251897818154217,-0.25338203699557,-0.254865659604514,-0.256348682489943,-0.257831102162159,-0.259312915132886,-0.260794117915276,-0.262274707023913,-0.263754678974831,-0.265234030285512,-0.266712757474898,-0.268190857063403,-0.269668325572915,-0.271145159526808,-0.272621355449949,-0.274096909868706,-0.275571819310958,-0.2770460803061,-0.278519689385053,-0.279992643080273,-0.281464937925758,-0.282936570457055,-0.284407537211272,-0.28587783472708,-0.287347459544729,-0.28881640820605,-0.290284677254462,-0.291752263234989,-0.293219162694259,-0.294685372180514,-0.296150888243624,-0.297615707435086,-0.29907982630804,-0.300543241417273,-0.302005949319228,-0.303467946572011,-0.304929229735402,-0.306389795370861,-0.307849640041535,-0.309308760312269,-0.310767152749611,-0.312224813921825,-0.313681740398891,-0.315137928752522,-0.316593375556166,-0.318048077385015,-0.319502030816016,-0.320955232427875,-0.32240767880107,-0.323859366517853,-0.325310292162263,-0.326760452320132,-0.328209843579092,-0.329658462528587,-0.331106305759876,-0.332553369866044,-0.333999651442009,-0.335445147084531,-0.33688985339222,-0.338333766965541,-0.339776884406827,-0.341219202320282,-0.342660717311994,-0.344101425989939,-0.345541324963989,-0.346980410845924,-0.348418680249435,-0.349856129790135,-0.351292756085567,-0.352728555755211,-0.35416352542049,-0.355597661704784,-0.35703096123343,-0.358463420633736,-0.359895036534988,-0.361325805568454,-0.362755724367397,-0.36418478956708,-0.365612997804774,-0.367040345719767,-0.368466829953372,-0.369892447148934,-0.371317193951837,-0.372741067009516,-0.374164062971458,-0.375586178489217,-0.377007410216418,-0.378427754808765,-0.379847208924051,-0.381265769222162,-0.38268343236509,-0.384100195016935,-0.385516053843919,-0.386931005514389,-0.388345046698826,-0.389758174069856,-0.391170384302254,-0.392581674072951,-0.393992040061048,-0.395401478947816,-0.39680998741671,-0.398217562153373,-0.399624199845647,-0.401029897183575,-0.402434650859418,-0.403838457567654,-0.40524131400499,-0.406643216870369,-0.408044162864978,-0.409444148692257,-0.410843171057904,-0.412241226669883,-0.413638312238434,-0.415034424476082,-0.416429560097637,-0.417823715820212,-0.419216888363224,-0.420609074448402,-0.4220002707998,-0.423390474143796,-0.424779681209109,-0.4261678887268,-0.427555093430282,-0.428941292055329,-0.430326481340083,-0.431710658025057,-0.433093818853152,-0.434475960569656,-0.435857079922255,-0.437237173661044,-0.438616238538527,-0.439994271309633,-0.441371268731717,-0.44274722756457,-0.444122144570429,-0.445496016513982,-0.446868840162374,-0.44824061228522,-0.449611329654607,-0.450980989045104,-0.452349587233771,-0.453717121000164,-0.455083587126344,-0.456448982396884,-0.457813303598877,-0.459176547521944,-0.46053871095824,-0.461899790702463,-0.46325978355186,-0.464618686306238,-0.465976495767966,-0.467333208741988,-0.468688822035828,-0.470043332459595,-0.471396736825998,-0.472749031950343,-0.47410021465055,-0.475450281747156,-0.476799230063322,-0.478147056424843,-0.479493757660153,-0.480839330600334,-0.482183772079123,-0.483527078932918,-0.484869248000791,-0.486210276124486,-0.487550160148436,-0.488888896919763,-0.490226483288291,-0.49156291610655,-0.492898192229784,-0.49423230851596,-0.495565261825772,-0.496897049022654,-0.498227666972782,-0.499557112545082,-0.500885382611241,-0.502212474045711,-0.503538383725717,-0.504863108531268,-0.506186645345155,-0.507508991052971,-0.508830142543107,-0.510150096706767,-0.51146885043797,-0.512786400633563,-0.514102744193222,-0.515417878019463,-0.51673179901765,-0.518044504095999,-0.51935599016559,-0.520666254140367,-0.521975292937154,-0.523283103475656,-0.524589682678469,-0.525895027471085,-0.527199134781901,-0.528502001542228,-0.529803624686295,-0.531104001151255,-0.532403127877198,-0.533701001807153,-0.534997619887097,-0.536292979065963,-0.537587076295646,-0.538879908531008,-0.540171472729893,-0.541461765853123,-0.542750784864516,-0.544038526730884,-0.545324988422046,-0.546610166910835,-0.5478940591731,-0.549176662187719,-0.550457972936605,-0.551737988404707,-0.553016705580027,-0.55429412145362,-0.555570233019602,-0.55684503727516,-0.558118531220556,-0.559390711859136,-0.560661576197336,-0.561931121244689,-0.563199344013834,-0.564466241520519,-0.565731810783613,-0.566996048825108,-0.568258952670131,-0.569520519346947,-0.570780745886967,-0.572039629324757,-0.573297166698042,-0.574553355047716,-0.575808191417845,-0.577061672855679,-0.578313796411655,-0.579564559139406,-0.580813958095764,-0.582061990340775,-0.583308652937698,-0.584553942953015,-0.585797857456439,-0.587040393520918,-0.588281548222645,-0.589521318641064,-0.590759701858874,-0.591996694962041,-0.5932322950398,-0.594466499184664,-0.595699304492433,-0.596930708062197,-0.598160706996342,-0.599389298400565,-0.600616479383869,-0.60184224705858,-0.603066598540348,-0.604289530948156,-0.605511041404325,-0.606731127034524,-0.607949784967774,-0.609167012336453,-0.610382806276309,-0.611597163926462,-0.61281008242941,-0.614021558931038,-0.615231590580627,-0.616440174530854,-0.617647307937804,-0.618852987960976,-0.620057211763289,-0.621259976511087,-0.62246127937415,-0.623661117525695,-0.624859488142386,-0.626056388404344,-0.627251815495144,-0.628445766601833,-0.629638238914927,-0.630829229628424,-0.632018735939809,-0.633206755050057,-0.634393284163645,-0.635578320488556,-0.636761861236284,-0.637943903621844,-0.639124444863776,-0.640303482184151,-0.641481012808583,-0.642657033966227,-0.643831542889791,-0.645004536815544,-0.646176012983316,-0.647345968636512,-0.648514401022112,-0.649681307390683,-0.650846684996381,-0.65201053109696,-0.653172842953777,-0.6543336178318,-0.655492852999615,-0.656650545729429,-0.657806693297079,-0.658961292982037,-0.66011434206742,-0.661265837839992,-0.662415777590172,-0.66356415861204,-0.664710978203345,-0.665856233665509,-0.666999922303637,-0.668142041426518,-0.669282588346636,-0.670421560380173,-0.671558954847018,-0.672694769070773,-0.673829000378756,-0.674961646102012,-0.676092703575316,-0.67722217013718,-0.678350043129861,-0.679476319899365,-0.680600997795453,-0.68172407417165,-0.682845546385248,-0.683965411797315,-0.6850836677727,-0.686200311680038,-0.687315340891759,-0.68842875278409,-0.689540544737067,-0.690650714134534,-0.691759258364158,-0.692866174817425,-0.693971460889654,-0.695075113980001,-0.696177131491463,-0.697277510830886,-0.698376249408973,-0.699473344640284,-0.700568793943248,-0.701662594740168,-0.702754744457225,-0.703845240524485,-0.704934080375905,-0.70602126144934,-0.707106781186547,-0.708190637033195,-0.709272826438865,-0.710353346857062,-0.711432195745216,-0.712509370564692,-0.713584868780794,-0.714658687862769,-0.715730825283818,-0.716801278521099,-0.717870045055732,-0.718937122372804,-0.720002507961382,-0.721066199314508,-0.722128193929215,-0.723188489306527,-0.724247082951467,-0.725303972373061,-0.726359155084346,-0.727412628602376,-0.728464390448225,-0.729514438146997,-0.730562769227827,-0.731609381223893,-0.732654271672413,-0.73369743811466,-0.734738878095963,-0.735778589165713,-0.73681656887737,-0.737852814788466,-0.738887324460615,-0.739920095459516,-0.740951125354959,-0.741980411720831,-0.743007952135122,-0.744033744179929,-0.745057785441466,-0.746080073510064,-0.74710060598018,-0.748119380450403,-0.749136394523459,-0.750151645806215,-0.751165131909686,-0.752176850449042,-0.753186799043612,-0.754194975316889,-0.755201376896536,-0.756206001414394,-0.757208846506484,-0.758209909813015,-0.759209188978388,-0.760206681651202,-0.761202385484262,-0.762196298134579,-0.763188417263381,-0.764178740536117,-0.765167265622459,-0.766153990196313,-0.76713891193582,-0.768122028523365,-0.769103337645579,-0.770082836993348,-0.771060524261814,-0.772036397150385,-0.773010453362737,-0.773982690606823,-0.774953106594874,-0.775921699043408,-0.776888465673233,-0.777853404209453,-0.778816512381476,-0.779777787923014,-0.780737228572094,-0.781694832071059,-0.782650596166576,-0.783604518609638,-0.784556597155575,-0.785506829564054,-0.786455213599086,-0.787401747029032,-0.788346427626606,-0.789289253168885,-0.79023022143731,-0.79116933021769,-0.792106577300212,-0.793041960479444,-0.793975477554337,-0.794907126328237,-0.795836904608883,-0.796764810208419,-0.797690840943391,-0.79861499463476,-0.799537269107905,-0.800457662192623,-0.80137617172314,-0.802292795538116,-0.803207531480645,-0.804120377398265,-0.805031331142963,-0.805940390571176,-0.806847553543799,-0.80775281792619,-0.808656181588175,-0.809557642404051,-0.810457198252595,-0.811354847017064,-0.812250586585204,-0.813144414849254,-0.814036329705948,-0.814926329056526,-0.815814410806734,-0.816700572866828,-0.817584813151584,-0.818467129580298,-0.819347520076797,-0.820225982569434,-0.821102514991105,-0.821977115279242,-0.822849781375826,-0.823720511227391,-0.824589302785025,-0.825456154004377,-0.826321062845663,-0.827184027273669,-0.828045045257755,-0.828904114771865,-0.829761233794523,-0.830616400308846,-0.831469612302545,-0.83232086776793,-0.833170164701913,-0.834017501106018,-0.83486287498638,-0.835706284353753,-0.836547727223512,-0.837387201615662,-0.838224705554838,-0.839060237070313,-0.839893794195999,-0.840725374970458,-0.841554977436899,-0.842382599643186,-0.843208239641845,-0.844031895490066,-0.844853565249707,-0.845673246987299,-0.846490938774052,-0.847306638685858,-0.848120344803297,-0.84893205521164,-0.849741768000853,-0.850549481265604,-0.851355193105265,-0.85215890162392,-0.852960604930364,-0.853760301138111,-0.854557988365401,-0.855353664735196,-0.856147328375194,-0.856938977417829,-0.857728610000272,-0.858516224264443,-0.859301818357008,-0.86008539042939,-0.860866938637767,-0.861646461143081,-0.862423956111041,-0.863199421712124,-0.863972856121586,-0.864744257519462,-0.865513624090569,-0.866280954024513,-0.867046245515693,-0.867809496763303,-0.868570705971341,-0.869329871348607,-0.870086991108711,-0.870842063470079,-0.871595086655951,-0.872346058894391,-0.87309497841829,-0.873841843465367,-0.874586652278176,-0.875329403104111,-0.876070094195407,-0.876808723809145,-0.877545290207261,-0.878279791656541,-0.879012226428633,-0.879742592800048,-0.880470889052161,-0.881197113471222,-0.881921264348355,-0.882643339979563,-0.883363338665732,-0.884081258712635,-0.884797098430938,-0.8855108561362,-0.886222530148881,-0.886932118794342,-0.887639620402854,-0.888345033309596,-0.889048355854664,-0.889749586383073,-0.890448723244758,-0.891145764794583,-0.891840709392343,-0.892533555402764,-0.893224301195515,-0.893912945145203,-0.894599485631383,-0.895283921038558,-0.895966249756185,-0.89664647017868,-0.897324580705418,-0.89800057974074,-0.898674465693954,-0.899346236979342,-0.90001589201616,-0.900683429228647,-0.901348847046022,-0.902012143902493,-0.902673318237259,-0.903332368494512,-0.903989293123443,-0.904644090578246,-0.905296759318119,-0.905947297807268,-0.906595704514915,-0.907241977915296,-0.907886116487666,-0.908528118716306,-0.909167983090522,-0.909805708104652,-0.910441292258067,-0.911074734055176,-0.91170603200543,-0.912335184623323,-0.912962190428398,-0.913587047945251,-0.91420975570353,-0.914830312237946,-0.915448716088268,-0.916064965799332,-0.916679059921043,-0.917290997008378,-0.91790077562139,-0.918508394325212,-0.919113851690058,-0.919717146291227,-0.920318276709111,-0.920917241529189,-0.921514039342042,-0.922108668743345,-0.922701128333879,-0.923291416719528,-0.923879532511287,-0.924465474325262,-0.925049240782677,-0.925630830509873,-0.926210242138311,-0.926787474304582,-0.927362525650401,-0.927935394822618,-0.928506080473215,-0.929074581259316,-0.929640895843181,-0.930205022892219,-0.930766961078984,-0.93132670908118,-0.931884265581668,-0.932439629268462,-0.932992798834739,-0.933543772978836,-0.934092550404259,-0.934639129819681,-0.935183509938948,-0.93572568948108,-0.936265667170278,-0.936803441735921,-0.937339011912575,-0.93787237643999,-0.938403534063108,-0.938932483532065,-0.93945922360219,-0.939983753034014,-0.940506070593268,-0.941026175050889,-0.941544065183021,-0.942059739771017,-0.942573197601447,-0.943084437466093,-0.94359345816196,-0.944100258491273,-0.94460483726148,-0.94510719328526,-0.945607325380521,-0.946105232370403,-0.946600913083284,-0.947094366352777,-0.947585591017741,-0.948074585922276,-0.94856134991573,-0.949045881852701,-0.949528180593037,-0.950008245001843,-0.950486073949482,-0.950961666311575,-0.951435020969008,-0.951906136807932,-0.952375012719766,-0.952841647601199,-0.953306040354194,-0.95376818988599,-0.954228095109106,-0.954685754941338,-0.955141168305771,-0.955594334130771,-0.956045251349996,-0.956493918902395,-0.956940335732209,-0.957384500788976,-0.957826413027533,-0.958266071408018,-0.958703474895871,-0.959138622461842,-0.959571513081985,-0.960002145737666,-0.960430519415566,-0.96085663310768,-0.961280485811321,-0.961702076529123,-0.962121404269042,-0.962538468044359,-0.962953266873684,-0.963365799780954,-0.96377606579544,-0.964184063951746,-0.964589793289813,-0.96499325285492,-0.965394441697689,-0.965793358874084,-0.966190003445413,-0.966584374478333,-0.966976471044852,-0.967366292222328,-0.967753837093475,-0.968139104746362,-0.968522094274417,-0.968902804776429,-0.969281235356548,-0.969657385124292,-0.970031253194544,-0.970402838687556,-0.97077214072895,-0.971139158449725,-0.971503890986252,-0.971866337480279,-0.972226497078936,-0.972584368934732,-0.97293995220556,-0.973293246054698,-0.973644249650812,-0.973992962167956,-0.974339382785576,-0.974683510688511,-0.975025345066994,-0.975364885116657,-0.975702130038528,-0.976037079039039,-0.976369731330021,-0.976700086128712,-0.977028142657754,-0.9773539001452,-0.97767735782451,-0.977998514934557,-0.978317370719628,-0.978633924429423,-0.978948175319062,-0.979260122649082,-0.979569765685441,-0.979877103699518,-0.980182135968117,-0.980484861773469,-0.98078528040323,-0.981083391150487,-0.981379193313755,-0.981672686196983,-0.981963869109555,-0.982252741366289,-0.982539302287441,-0.982823551198705,-0.983105487431216,-0.983385110321551,-0.98366241921173,-0.983937413449219,-0.984210092386929,-0.984480455383221,-0.984748501801904,-0.98501423101224,-0.985277642388941,-0.985538735312176,-0.985797509167567,-0.986053963346195,-0.986308097244599,-0.986559910264775,-0.986809401814185,-0.987056571305751,-0.987301418157858,-0.987543941794359,-0.987784141644572,-0.988022017143284,-0.988257567730749,-0.988490792852697,-0.988721691960324,-0.988950264510303,-0.989176509964781,-0.98940042779138,-0.989622017463201,-0.989841278458821,-0.990058210262297,-0.990272812363169,-0.990485084256457,-0.990695025442665,-0.99090263542778,-0.991107913723277,-0.991310859846115,-0.991511473318744,-0.9917097536691,-0.991905700430609,-0.992099313142192,-0.992290591348257,-0.99247953459871,-0.992666142448948,-0.992850414459865,-0.993032350197851,-0.993211949234795,-0.993389211148081,-0.993564135520595,-0.993736721940725,-0.993906970002356,-0.994074879304879,-0.994240449453188,-0.994403680057679,-0.994564570734255,-0.994723121104326,-0.994879330794806,-0.995033199438119,-0.995184726672197,-0.995333912140482,-0.995480755491927,-0.995625256380994,-0.99576741446766,-0.995907229417412,-0.996044700901252,-0.996179828595697,-0.996312612182778,-0.996443051350043,-0.996571145790555,-0.996696895202896,-0.996820299291166,-0.996941357764982,-0.997060070339483,-0.997176436735326,-0.99729045667869,-0.997402129901275,-0.997511456140303,-0.99761843513852,-0.997723066644192,-0.997825350411112,-0.997925286198596,-0.998022873771486,-0.998118112900149,-0.998211003360478,-0.998301544933893,-0.99838973740734,-0.998475580573295,-0.998559074229759,-0.998640218180265,-0.998719012233873,-0.998795456205172,-0.998869549914284,-0.998941293186857,-0.999010685854073,-0.999077727752645,-0.999142418724817,-0.999204758618364,-0.999264747286594,-0.999322384588349,-0.999377670388003,-0.999430604555462,-0.999481186966167,-0.999529417501093,-0.999575296046749,-0.999618822495179,-0.999659996743959,-0.999698818696204,-0.999735288260562,-0.999769405351215,-0.999801169887884,-0.999830581795823,-0.999857641005824,-0.999882347454213,-0.999904701082853,-0.999924701839145,-0.999942349676024,-0.999957644551964,-0.999970586430974,-0.999981175282601,-0.999989411081928,-0.999995293809576,-0.999998823451702,-1,-0.999998823451702,-0.999995293809576,-0.999989411081928,-0.999981175282601,-0.999970586430974,-0.999957644551964,-0.999942349676024,-0.999924701839145,-0.999904701082853,-0.999882347454213,-0.999857641005824,-0.999830581795823,-0.999801169887884,-0.999769405351215,-0.999735288260562,-0.999698818696204,-0.999659996743959,-0.999618822495179,-0.999575296046749,-0.999529417501093,-0.999481186966167,-0.999430604555462,-0.999377670388003,-0.99932238458835,-0.999264747286595,-0.999204758618364,-0.999142418724817,-0.999077727752645,-0.999010685854073,-0.998941293186857,-0.998869549914284,-0.998795456205172,-0.998719012233873,-0.998640218180265,-0.998559074229759,-0.998475580573295,-0.99838973740734,-0.998301544933893,-0.998211003360478,-0.998118112900149,-0.998022873771486,-0.997925286198596,-0.997825350411112,-0.997723066644192,-0.99761843513852,-0.997511456140303,-0.997402129901275,-0.99729045667869,-0.997176436735326,-0.997060070339483,-0.996941357764982,-0.996820299291166,-0.996696895202896,-0.996571145790555,-0.996443051350043,-0.996312612182778,-0.996179828595697,-0.996044700901252,-0.995907229417412,-0.99576741446766,-0.995625256380994,-0.995480755491927,-0.995333912140482,-0.995184726672197,-0.995033199438119,-0.994879330794806,-0.994723121104326,-0.994564570734255,-0.994403680057679,-0.994240449453188,-0.994074879304879,-0.993906970002356,-0.993736721940725,-0.993564135520595,-0.993389211148081,-0.993211949234795,-0.993032350197851,-0.992850414459865,-0.992666142448948,-0.99247953459871,-0.992290591348257,-0.992099313142192,-0.991905700430609,-0.9917097536691,-0.991511473318744,-0.991310859846115,-0.991107913723277,-0.99090263542778,-0.990695025442665,-0.990485084256457,-0.990272812363169,-0.990058210262297,-0.989841278458821,-0.989622017463201,-0.98940042779138,-0.989176509964781,-0.988950264510303,-0.988721691960324,-0.988490792852697,-0.988257567730749,-0.988022017143284,-0.987784141644572,-0.987543941794359,-0.987301418157858,-0.987056571305751,-0.986809401814186,-0.986559910264775,-0.986308097244599,-0.986053963346196,-0.985797509167567,-0.985538735312176,-0.985277642388941,-0.98501423101224,-0.984748501801904,-0.984480455383221,-0.984210092386929,-0.983937413449219,-0.98366241921173,-0.983385110321551,-0.983105487431216,-0.982823551198705,-0.982539302287441,-0.982252741366289,-0.981963869109555,-0.981672686196983,-0.981379193313755,-0.981083391150487,-0.98078528040323,-0.980484861773469,-0.980182135968118,-0.979877103699518,-0.979569765685441,-0.979260122649082,-0.978948175319062,-0.978633924429423,-0.978317370719628,-0.977998514934557,-0.97767735782451,-0.9773539001452,-0.977028142657754,-0.976700086128712,-0.976369731330021,-0.976037079039039,-0.975702130038529,-0.975364885116657,-0.975025345066994,-0.974683510688511,-0.974339382785576,-0.973992962167956,-0.973644249650812,-0.973293246054698,-0.97293995220556,-0.972584368934732,-0.972226497078936,-0.971866337480279,-0.971503890986252,-0.971139158449725,-0.97077214072895,-0.970402838687556,-0.970031253194544,-0.969657385124292,-0.969281235356548,-0.968902804776429,-0.968522094274417,-0.968139104746362,-0.967753837093476,-0.967366292222329,-0.966976471044852,-0.966584374478333,-0.966190003445413,-0.965793358874084,-0.965394441697689,-0.96499325285492,-0.964589793289813,-0.964184063951746,-0.96377606579544,-0.963365799780954,-0.962953266873684,-0.962538468044359,-0.962121404269042,-0.961702076529123,-0.961280485811321,-0.96085663310768,-0.960430519415566,-0.960002145737666,-0.959571513081985,-0.959138622461842,-0.958703474895872,-0.958266071408018,-0.957826413027533,-0.957384500788976,-0.956940335732209,-0.956493918902395,-0.956045251349996,-0.955594334130771,-0.955141168305771,-0.954685754941338,-0.954228095109106,-0.95376818988599,-0.953306040354194,-0.952841647601199,-0.952375012719766,-0.951906136807932,-0.951435020969008,-0.950961666311575,-0.950486073949482,-0.950008245001843,-0.949528180593037,-0.949045881852701,-0.94856134991573,-0.948074585922276,-0.947585591017741,-0.947094366352777,-0.946600913083284,-0.946105232370403,-0.945607325380521,-0.94510719328526,-0.94460483726148,-0.944100258491273,-0.94359345816196,-0.943084437466093,-0.942573197601447,-0.942059739771018,-0.941544065183021,-0.941026175050889,-0.940506070593268,-0.939983753034014,-0.93945922360219,-0.938932483532065,-0.938403534063108,-0.93787237643999,-0.937339011912575,-0.936803441735922,-0.936265667170278,-0.93572568948108,-0.935183509938948,-0.934639129819681,-0.934092550404259,-0.933543772978836,-0.932992798834739,-0.932439629268462,-0.931884265581668,-0.931326709081181,-0.930766961078984,-0.930205022892219,-0.929640895843181,-0.929074581259316,-0.928506080473216,-0.927935394822618,-0.927362525650401,-0.926787474304582,-0.926210242138311,-0.925630830509873,-0.925049240782678,-0.924465474325263,-0.923879532511287,-0.923291416719528,-0.922701128333879,-0.922108668743345,-0.921514039342042,-0.920917241529189,-0.920318276709111,-0.919717146291227,-0.919113851690058,-0.918508394325212,-0.91790077562139,-0.917290997008378,-0.916679059921043,-0.916064965799332,-0.915448716088268,-0.914830312237946,-0.914209755703531,-0.913587047945251,-0.912962190428398,-0.912335184623323,-0.91170603200543,-0.911074734055176,-0.910441292258067,-0.909805708104652,-0.909167983090522,-0.908528118716306,-0.907886116487666,-0.907241977915296,-0.906595704514916,-0.905947297807269,-0.905296759318119,-0.904644090578246,-0.903989293123443,-0.903332368494512,-0.902673318237259,-0.902012143902493,-0.901348847046022,-0.900683429228647,-0.90001589201616,-0.899346236979342,-0.898674465693954,-0.89800057974074,-0.897324580705418,-0.89664647017868,-0.895966249756185,-0.895283921038558,-0.894599485631383,-0.893912945145203,-0.893224301195515,-0.892533555402765,-0.891840709392343,-0.891145764794583,-0.890448723244758,-0.889749586383073,-0.889048355854665,-0.888345033309596,-0.887639620402854,-0.886932118794342,-0.886222530148881,-0.8855108561362,-0.884797098430938,-0.884081258712635,-0.883363338665732,-0.882643339979563,-0.881921264348355,-0.881197113471222,-0.880470889052161,-0.879742592800048,-0.879012226428634,-0.878279791656542,-0.877545290207261,-0.876808723809146,-0.876070094195407,-0.875329403104111,-0.874586652278176,-0.873841843465367,-0.87309497841829,-0.872346058894391,-0.871595086655951,-0.870842063470079,-0.870086991108711,-0.869329871348607,-0.868570705971341,-0.867809496763304,-0.867046245515693,-0.866280954024513,-0.865513624090569,-0.864744257519462,-0.863972856121587,-0.863199421712124,-0.862423956111041,-0.861646461143081,-0.860866938637767,-0.86008539042939,-0.859301818357009,-0.858516224264443,-0.857728610000272,-0.856938977417829,-0.856147328375194,-0.855353664735196,-0.854557988365401,-0.853760301138112,-0.852960604930364,-0.85215890162392,-0.851355193105265,-0.850549481265604,-0.849741768000853,-0.84893205521164,-0.848120344803297,-0.847306638685858,-0.846490938774052,-0.845673246987299,-0.844853565249707,-0.844031895490067,-0.843208239641845,-0.842382599643186,-0.841554977436899,-0.840725374970458,-0.839893794196,-0.839060237070313,-0.838224705554838,-0.837387201615662,-0.836547727223512,-0.835706284353753,-0.83486287498638,-0.834017501106018,-0.833170164701913,-0.83232086776793,-0.831469612302545,-0.830616400308846,-0.829761233794523,-0.828904114771865,-0.828045045257756,-0.827184027273669,-0.826321062845664,-0.825456154004378,-0.824589302785025,-0.823720511227391,-0.822849781375827,-0.821977115279242,-0.821102514991105,-0.820225982569435,-0.819347520076797,-0.818467129580299,-0.817584813151584,-0.816700572866828,-0.815814410806734,-0.814926329056527,-0.814036329705948,-0.813144414849254,-0.812250586585204,-0.811354847017064,-0.810457198252595,-0.809557642404051,-0.808656181588175,-0.807752817926191,-0.806847553543799,-0.805940390571176,-0.805031331142964,-0.804120377398266,-0.803207531480645,-0.802292795538116,-0.80137617172314,-0.800457662192623,-0.799537269107905,-0.798614994634761,-0.797690840943391,-0.796764810208419,-0.795836904608884,-0.794907126328237,-0.793975477554337,-0.793041960479444,-0.792106577300213,-0.79116933021769,-0.79023022143731,-0.789289253168886,-0.788346427626606,-0.787401747029032,-0.786455213599086,-0.785506829564054,-0.784556597155575,-0.783604518609638,-0.782650596166576,-0.78169483207106,-0.780737228572095,-0.779777787923015,-0.778816512381476,-0.777853404209453,-0.776888465673233,-0.775921699043408,-0.774953106594874,-0.773982690606823,-0.773010453362737,-0.772036397150385,-0.771060524261814,-0.770082836993348,-0.76910333764558,-0.768122028523365,-0.76713891193582,-0.766153990196313,-0.765167265622459,-0.764178740536117,-0.763188417263381,-0.762196298134579,-0.761202385484262,-0.760206681651203,-0.759209188978388,-0.758209909813015,-0.757208846506485,-0.756206001414394,-0.755201376896537,-0.754194975316889,-0.753186799043613,-0.752176850449043,-0.751165131909686,-0.750151645806215,-0.74913639452346,-0.748119380450404,-0.74710060598018,-0.746080073510064,-0.745057785441466,-0.74403374417993,-0.743007952135122,-0.741980411720831,-0.740951125354959,-0.739920095459516,-0.738887324460616,-0.737852814788466,-0.73681656887737,-0.735778589165714,-0.734738878095963,-0.73369743811466,-0.732654271672413,-0.731609381223893,-0.730562769227828,-0.729514438146997,-0.728464390448225,-0.727412628602376,-0.726359155084346,-0.725303972373061,-0.724247082951467,-0.723188489306527,-0.722128193929215,-0.721066199314508,-0.720002507961382,-0.718937122372805,-0.717870045055732,-0.716801278521099,-0.715730825283819,-0.714658687862769,-0.713584868780794,-0.712509370564692,-0.711432195745216,-0.710353346857062,-0.709272826438866,-0.708190637033196,-0.707106781186548,-0.70602126144934,-0.704934080375905,-0.703845240524485,-0.702754744457226,-0.701662594740169,-0.700568793943248,-0.699473344640284,-0.698376249408973,-0.697277510830887,-0.696177131491463,-0.695075113980001,-0.693971460889654,-0.692866174817425,-0.691759258364158,-0.690650714134535,-0.689540544737067,-0.688428752784091,-0.687315340891759,-0.686200311680038,-0.685083667772701,-0.683965411797316,-0.682845546385248,-0.68172407417165,-0.680600997795453,-0.679476319899366,-0.678350043129862,-0.677222170137181,-0.676092703575316,-0.674961646102012,-0.673829000378756,-0.672694769070773,-0.671558954847019,-0.670421560380173,-0.669282588346636,-0.668142041426518,-0.666999922303638,-0.66585623366551,-0.664710978203345,-0.66356415861204,-0.662415777590172,-0.661265837839992,-0.660114342067421,-0.658961292982038,-0.657806693297079,-0.656650545729429,-0.655492852999615,-0.654333617831801,-0.653172842953777,-0.65201053109696,-0.650846684996381,-0.649681307390683,-0.648514401022112,-0.647345968636513,-0.646176012983317,-0.645004536815544,-0.643831542889791,-0.642657033966227,-0.641481012808584,-0.640303482184152,-0.639124444863776,-0.637943903621844,-0.636761861236284,-0.635578320488556,-0.634393284163646,-0.633206755050058,-0.632018735939809,-0.630829229628425,-0.629638238914927,-0.628445766601833,-0.627251815495145,-0.626056388404344,-0.624859488142386,-0.623661117525695,-0.62246127937415,-0.621259976511088,-0.620057211763289,-0.618852987960977,-0.617647307937804,-0.616440174530854,-0.615231590580627,-0.614021558931039,-0.61281008242941,-0.611597163926462,-0.610382806276309,-0.609167012336453,-0.607949784967774,-0.606731127034525,-0.605511041404326,-0.604289530948156,-0.603066598540348,-0.601842247058581,-0.600616479383869,-0.599389298400565,-0.598160706996342,-0.596930708062197,-0.595699304492433,-0.594466499184665,-0.5932322950398,-0.591996694962041,-0.590759701858874,-0.589521318641064,-0.588281548222646,-0.587040393520918,-0.585797857456439,-0.584553942953015,-0.583308652937698,-0.582061990340775,-0.580813958095765,-0.579564559139406,-0.578313796411656,-0.57706167285568,-0.575808191417845,-0.574553355047716,-0.573297166698043,-0.572039629324757,-0.570780745886967,-0.569520519346947,-0.568258952670131,-0.566996048825109,-0.565731810783614,-0.56446624152052,-0.563199344013834,-0.561931121244689,-0.560661576197337,-0.559390711859136,-0.558118531220556,-0.55684503727516,-0.555570233019602,-0.55429412145362,-0.553016705580028,-0.551737988404708,-0.550457972936605,-0.54917666218772,-0.5478940591731,-0.546610166910835,-0.545324988422047,-0.544038526730884,-0.542750784864516,-0.541461765853123,-0.540171472729893,-0.538879908531009,-0.537587076295646,-0.536292979065963,-0.534997619887097,-0.533701001807153,-0.532403127877199,-0.531104001151255,-0.529803624686295,-0.528502001542229,-0.527199134781901,-0.525895027471085,-0.524589682678469,-0.523283103475657,-0.521975292937155,-0.520666254140367,-0.51935599016559,-0.518044504096,-0.51673179901765,-0.515417878019463,-0.514102744193222,-0.512786400633563,-0.51146885043797,-0.510150096706767,-0.508830142543107,-0.507508991052971,-0.506186645345155,-0.504863108531267,-0.503538383725718,-0.502212474045711,-0.500885382611241,-0.499557112545082,-0.498227666972782,-0.496897049022654,-0.495565261825773,-0.49423230851596,-0.492898192229784,-0.49156291610655,-0.490226483288291,-0.488888896919764,-0.487550160148436,-0.486210276124487,-0.484869248000791,-0.483527078932919,-0.482183772079123,-0.480839330600334,-0.479493757660153,-0.478147056424843,-0.476799230063322,-0.475450281747156,-0.474100214650551,-0.472749031950343,-0.471396736825998,-0.470043332459596,-0.468688822035828,-0.467333208741988,-0.465976495767967,-0.464618686306238,-0.46325978355186,-0.461899790702463,-0.46053871095824,-0.459176547521945,-0.457813303598878,-0.456448982396884,-0.455083587126344,-0.453717121000164,-0.452349587233771,-0.450980989045104,-0.449611329654607,-0.44824061228522,-0.446868840162374,-0.445496016513982,-0.44412214457043,-0.44274722756457,-0.441371268731717,-0.439994271309633,-0.438616238538528,-0.437237173661044,-0.435857079922256,-0.434475960569656,-0.433093818853152,-0.431710658025057,-0.430326481340083,-0.42894129205533,-0.427555093430283,-0.4261678887268,-0.424779681209109,-0.423390474143796,-0.4220002707998,-0.420609074448403,-0.419216888363224,-0.417823715820213,-0.416429560097637,-0.415034424476082,-0.413638312238435,-0.412241226669883,-0.410843171057904,-0.409444148692258,-0.408044162864979,-0.406643216870369,-0.40524131400499,-0.403838457567655,-0.402434650859419,-0.401029897183576,-0.399624199845647,-0.398217562153374,-0.396809987416711,-0.395401478947817,-0.393992040061048,-0.392581674072952,-0.391170384302254,-0.389758174069857,-0.388345046698827,-0.386931005514389,-0.385516053843919,-0.384100195016935,-0.38268343236509,-0.381265769222163,-0.379847208924051,-0.378427754808766,-0.377007410216418,-0.375586178489217,-0.374164062971459,-0.372741067009516,-0.371317193951838,-0.369892447148934,-0.368466829953372,-0.367040345719767,-0.365612997804774,-0.36418478956708,-0.362755724367397,-0.361325805568454,-0.359895036534988,-0.358463420633737,-0.35703096123343,-0.355597661704784,-0.354163525420491,-0.352728555755211,-0.351292756085567,-0.349856129790135,-0.348418680249435,-0.346980410845924,-0.345541324963989,-0.344101425989939,-0.342660717311995,-0.341219202320283,-0.339776884406827,-0.338333766965541,-0.33688985339222,-0.335445147084531,-0.33399965144201,-0.332553369866045,-0.331106305759877,-0.329658462528588,-0.328209843579092,-0.326760452320132,-0.325310292162263,-0.323859366517853,-0.32240767880107,-0.320955232427875,-0.319502030816015,-0.318048077385015,-0.316593375556166,-0.315137928752523,-0.313681740398892,-0.312224813921825,-0.310767152749612,-0.309308760312269,-0.307849640041535,-0.306389795370861,-0.304929229735402,-0.303467946572011,-0.302005949319229,-0.300543241417274,-0.299079826308041,-0.297615707435086,-0.296150888243624,-0.294685372180515,-0.293219162694259,-0.29175226323499,-0.290284677254462,-0.288816408206049,-0.287347459544729,-0.285877834727081,-0.284407537211272,-0.282936570457056,-0.281464937925758,-0.279992643080273,-0.278519689385054,-0.2770460803061,-0.275571819310958,-0.274096909868706,-0.272621355449949,-0.271145159526808,-0.269668325572916,-0.268190857063404,-0.266712757474899,-0.265234030285512,-0.263754678974831,-0.262274707023914,-0.260794117915276,-0.259312915132887,-0.257831102162159,-0.256348682489943,-0.254865659604514,-0.253382036995571,-0.251897818154217,-0.250413006572965,-0.24892760574572,-0.247441619167773,-0.245955050335795,-0.244467902747825,-0.242980179903264,-0.241491885302869,-0.240003022448741,-0.238513594844318,-0.237023605994368,-0.235533059404976,-0.234041958583544,-0.232550307038775,-0.231058108280671,-0.229565365820519,-0.228072083170886,-0.22657826384561,-0.225083911359793,-0.22358902922979,-0.222093620973203,-0.220597690108874,-0.21910124015687,-0.217604274638484,-0.21610679707622,-0.214608810993787,-0.213110319916092,-0.211611327369228,-0.21011183688047,-0.208611851978264,-0.207111376192219,-0.205610413053099,-0.204108966092817,-0.202607038844421,-0.201104634842092,-0.199601757621131,-0.198098410717953,-0.196594597670081,-0.195090322016129,-0.193585587295804,-0.192080397049893,-0.190574754820253,-0.189068664149806,-0.18756212858253,-0.186055151663447,-0.18454773693862,-0.183039887955141,-0.181531608261125,-0.1800229014057,-0.178513770938998,-0.177004220412149,-0.175494253377272,-0.173983873387464,-0.172473083996796,-0.170961888760302,-0.169450291233968,-0.167938294974731,-0.166425903540464,-0.16491312048997,-0.163399949382974,-0.161886393780112,-0.160372457242929,-0.158858143333862,-0.157343455616238,-0.155828397654265,-0.154312973013021,-0.152797185258444,-0.15128103795733,-0.149764534677322,-0.148247678986896,-0.146730474455362,-0.145212924652848,-0.143695033150295,-0.142176803519448,-0.140658239332849,-0.139139344163826,-0.137620121586487,-0.136100575175707,-0.134580708507126,-0.133060525157139,-0.131540028702883,-0.130019222722234,-0.128498110793794,-0.126976696496886,-0.125454983411546,-0.123932975118512,-0.122410675199216,-0.120888087235778,-0.119365214810992,-0.117842061508325,-0.116318630911905,-0.11479492660651,-0.113270952177565,-0.111746711211127,-0.110222207293883,-0.108697444013139,-0.107172424956809,-0.10564715371341,-0.104121633872055,-0.102595869022437,-0.101069862754828,-0.0995436186600694,-0.0980171403295605,-0.0964904313552532,-0.0949634953296395,-0.0934363358457481,-0.0919089564971329,-0.090381360877865,-0.0888535525825244,-0.0873255352061926,-0.0857973123444403,-0.0842688875933243,-0.0827402645493758,-0.0812114468095923,-0.0796824379714308,-0.0781532416327947,-0.0766238613920318,-0.0750943008479215,-0.0735645635996674,-0.0720346532468892,-0.0705045733896144,-0.0689743276282671,-0.0674439195636643,-0.0659133527970039,-0.0643826309298574,-0.0628517575641621,-0.0613207363022091,-0.0597895707466402,-0.0582582645004359,-0.0567268211669077,-0.0551952443496898,-0.0536635376527311,-0.0521317046802837,-0.0505997490368995,-0.0490676743274181,-0.0475354841569592,-0.0460031821309153,-0.0444707718549391,-0.0429382569349411,-0.0414056409770769,-0.0398729275877398,-0.0383401203735525,-0.0368072229413594,-0.0352742388982143,-0.0337411718513778,-0.0322080254083047,-0.0306748031766365,-0.0291415087641944,-0.0276081457789662,-0.0260747178291042,-0.0245412285229124,-0.0230076814688394,-0.0214740802754693,-0.019940428551515,-0.0184067299058052,-0.016872987947282,-0.0153392062849882,-0.0138053885280603,-0.0122715382857206,-0.010737659167265,-0.00920375478206014,-0.00766982873953126,-0.00613588464915448,-0.00460192612044841,-0.00306795676296654,-0.00153398018628517

};
/* ---- promenne a stavy pro prepinani modu AC/DC --------*/
//typedef enum{ REQ , SENDING} type_state ; // definice 2 stavu
typedef enum{ AC , DC} type_mode ; // definice 2 stavu
//type_state current_state = REQ ;
type_mode current_mode = AC;

volatile float32_t carry_freq = 100000;
volatile float32_t distance;
uint32_t samp_num = (SAMPLE_FREQ/100000); // prepocet vzorku;
uint8_t change_flag = 0;

/*promenne - generace sin - korelace ------------------------------------ */

#ifndef FLOAT
volatile q31_t y_output_sin [ADC_BUF_LEN/2];
volatile q31_t y_output_sin_copy [ADC_BUF_LEN/2];
volatile q31_t y_output_sin_copy_2 [ADC_BUF_LEN/2];
volatile q31_t y_output_sin_copy_3 [ADC_BUF_LEN/2];
#else
volatile float32_t y_output_sin [DATA_LEN];
volatile float32_t y_output_sin_copy [DATA_LEN];
volatile float32_t y_output_sin_copy_2 [DATA_LEN];
volatile float32_t y_output_sin_copy_3 [DATA_LEN];
#endif


/* USER CODE END PV */

/* Private function prototypes -----------------------------------------------*/
void SystemClock_Config(void);
static void MX_GPIO_Init(void);
static void MX_DMA_Init(void);
static void MX_ADC1_Init(void);
static void MX_ADC2_Init(void);
static void MX_ADC3_Init(void);
static void MX_I2C1_Init(void);
static void MX_I2S3_Init(void);
static void MX_SPI1_Init(void);
/* USER CODE BEGIN PFP */

/* USER CODE END PFP */

/* Private user code ---------------------------------------------------------*/
/* USER CODE BEGIN 0 */

void HAL_ADC_ConvCpltCallback(ADC_HandleTypeDef* hadc)
{
	buff_process_toggle = 1; // druha polovina bufferu naplena DMA
	//HAL_GPIO_WritePin(LD5_GPIO_Port, LD5_Pin, 0); /*indikace naplneni 2 casti DMA bufferu*/
}

void HAL_ADC_ConvHalfCpltCallback(ADC_HandleTypeDef* hadc)
{
	buff_process_toggle = 0; // prvni polovina bufferu naplena DMA
	//HAL_GPIO_WritePin(LD5_GPIO_Port, LD5_Pin, 1); /*indikace naplneni 1 casti DMA bufferu - led off*/
}
//void Generate_sin (float32_t carry_freq, float32_t distance,q31_t *y_output_sin, q31_t *y_output_sin_copy, q31_t *y_output_sin_copy_2, q31_t *y_output_sin_copy_3)
void Generate_sin ()

{

	volatile double sin_step = 0;
	//uint32_t phi = 0; // faze - (nastaveni v GUI)
	volatile uint32_t index = 0;
	float32_t phi = 0;
	phi =

	/*---------generace signalu o dane frekvenci o delce 1/2*ADC_BUF_LEN -------------------*/
	sin_step = floor(((carry_freq/SAMPLE_FREQ)*SIN_TAB_LEN) + 0.5);// frekvencni krok
	index = round((SIN_TAB_LEN*arm_cos_f32(phi))+SIN_TAB_LEN/4); /*s fazi  - nutne poupravit datovy typ index*/
	//index = round(SIN_TAB_LEN+SIN_TAB_LEN/4);
	index = index%SIN_TAB_LEN;

	for(i = 0; i < (samp_num-1); i++){ // (1/2)*ADC_BUF_LEN
#ifndef FLOAT
		arm_float_to_q31(&sin_tab[index+1],&y_output_sin[i],1 );
		y_output_sin_copy [i] = y_output_sin[i]; // vytvoreni kopie - correlacni fce meni hodnoty referenci tabulky
		y_output_sin_copy_2 [i] = y_output_sin[i];
		y_output_sin_copy_3 [i] = y_output_sin[i];
#else
		y_output_sin[i] = sin_tab[index+1]; // float
		y_output_sin_copy [i] = y_output_sin[i];
	#endif
		index = (index + (uint32_t)sin_step)%SIN_TAB_LEN; // uint32_t
	  }

}
volatile void CDC_ReceiveCallBack (uint8_t *buf, uint32_t len)
{
		uint32_t current_value;
		uint8_t req_type[2]; //DS - distance, AC - frequency, DC - DC mode - DC 0
		volatile uint8_t receive_buff [11];
		char* pend;

		uint8_t per = 1;// pocet navzorkovanych period ADC - lisi se carry freq
		strcpy(receive_buff, buf);

		char *str_ptr = strtok(buf," "); //navraci ukazatel na prvni string
		strcpy(req_type, str_ptr);
		//carry_freq = strtof(receive_buff, &pend);
		str_ptr = strtok(NULL, "/0");
		current_value = strtof(str_ptr, NULL);

		if(!strcmp(req_type,"DS")){ // strcmp - navraci 0 pokud identicke
			if(distance!=current_value)
				change_flag = 1;
			distance = current_value;
		}
		else if(!strcmp(req_type,"AC")){
			if(carry_freq!=current_value)
				change_flag = 1;

			if(current_value < 2000) //saturace -= mensi frekvence vyssi naroky na pamet
				carry_freq = 2000;
			else
				carry_freq=current_value;
			current_mode = AC;
		}
		else{
			current_mode = DC;
		}
		/*//starsi verze
		if (carry_freq == 0){
			current_mode = DC;
		}
		else{
			current_mode = AC;
			if (carry_freq>=50000)
				per = 5;
			else
				per = 1;
			samp_num = per*((uint32_t)(SAMPLE_FREQ/carry_freq)); // prepocet vzorku
			change_flag = 1;
		}*/

}
/* USER CODE END 0 */

/**
  * @brief  The application entry point.
  * @retval int
  */
int main(void)
{
  /* USER CODE BEGIN 1 */
	uint8_t buff [32] = "DC \r\n";
	uint8_t buff_1 [32] = "DATA \r\n";


	/* zakomentovane promenne ke generovani sin - neefektivni zabira RAM*/
	/*
	float32_t sin_gen_X; // vstupni x hodnoty v radianech
	q31_t sin_gen_q31;
	const q31_t sin_general [ADC_BUF_LEN]; // obecna tabulka , const - misto PROGMEM
	q31_t sin_buff;
	*/

	/*promenne pro korelaci------------------------------------*/
#ifndef FLOAT
	volatile q31_t sum_adc, x_adc, y_adc; // sum - ADC1, y_adc - ADC2, x_adc - ADC3 MAX, index - dummy promenna
	volatile float32_t sum_adc_dc, x_adc_dc, y_adc_dc; // sum - ADC1, y_adc - ADC2, x_adc - ADC3 MAX, index - dummy promenna
	volatile q31_t corr_out_sum [ADC_BUF_LEN];
	volatile q31_t corr_out_x [ADC_BUF_LEN];
	volatile q31_t corr_out_y [ADC_BUF_LEN];
	//volatile q31_t corr_out [DATA_LEN * 2]; // pouze pro debug
#else
	volatile float32_t sum_adc, x_adc, y_adc,ind_max;
	volatile float32_t corr_out [DATA_LEN * 2];
#endif
	volatile float x_out, y_out;

	/*------- Promenne pro sprintf prevod float na useky uint32 --  */
	volatile char *tmpSign_X;
	volatile char *tmpSign_Y;
	volatile float tmpVal;
	volatile float tmpFrac;
	volatile uint32_t tmpInt1_X;
	volatile uint32_t tmpInt1_Y;
	volatile uint32_t tmpInt2_X;
	volatile uint32_t tmpInt2_Y;

  /* USER CODE END 1 */
  

  /* MCU Configuration--------------------------------------------------------*/

  /* Reset of all peripherals, Initializes the Flash interface and the Systick. */
  HAL_Init();

  /* USER CODE BEGIN Init */

  /* USER CODE END Init */

  /* Configure the system clock */
  SystemClock_Config();

  /* USER CODE BEGIN SysInit */

  /* USER CODE END SysInit */

  /* Initialize all configured peripherals */
  MX_GPIO_Init();
  MX_DMA_Init();
  MX_ADC1_Init();
  MX_ADC2_Init();
  MX_ADC3_Init();
  MX_I2C1_Init();
  MX_I2S3_Init();
  MX_SPI1_Init();
  MX_USB_DEVICE_Init();
  /* USER CODE BEGIN 2 */
  /* -----------------spusteni ADC continous & DMA---------------------*/

  HAL_ADC_Start_DMA(&hadc1, (uint32_t*)adc_buf_1, ADC_BUF_LEN); // aktivace cteni DMA z ADC - SUM - ukladani do pameti adc_buf_1
  HAL_ADC_Start_DMA(&hadc2, (uint32_t*)adc_buf_2, ADC_BUF_LEN); // aktivace cteni DMA z ADC - Y
  HAL_ADC_Start_DMA(&hadc3, (uint32_t*)adc_buf_3, ADC_BUF_LEN); // aktivace cteni DMA z ADC - X

  /* ------------------ generovani tabuky sin a generovani sin--------------------*/
  /* neefektivni zabira RAM*/
  /*
  uint32_t i;
  for(i = 0; i <=(SIN_TAB_LEN - 1); i++)
  {
	  sin_gen_X = ((2*3.1415)*i/SIN_TAB_LEN);
	  arm_float_to_q31(&sin_gen_X,&sin_gen_q31,1);
	  sin_buff = arm_sin_q31(sin_gen_q31); // nelze ukladat do pole
	  sin_general [i] = sin_buff;
	  HAL_Delay(500);
  }

  */
  Generate_sin();
  /* USER CODE END 2 */

  /* Infinite loop */
  /* USER CODE BEGIN WHILE */
  while (1) /*-----------------------------------------MAIN ------------------------------------------------------*/
  {
	  /*
	   *prototypy fci:
	   *  void 	arm_max_q31 (const q31_t *pSrc, uint32_t blockSize, q31_t *pResult, uint32_t *pIndex)
	   *  void 	arm_float_to_q31 (const float32_t *pSrc, q31_t *pDst, uint32_t blockSize)
	   *  void arm_correlate_fast_q31 (const q31_t *pSrcA, uint32_t srcALen, const q31_t *pSrcB, uint32_t srcBLen, q31_t *pDst)
	   *  void 	arm_correlate_q31 (const q31_t *pSrcA, uint32_t srcALen, const q31_t *pSrcB, uint32_t srcBLen, q31_t *pDst)
	   *  void 	arm_mult_q31 (const q31_t *pSrcA, const q31_t *pSrcB, q31_t *pDst, uint32_t blockSize)
	   * */
	   // pySerial neni tak rychly
	  /*--------------------------------- PRVNI VERZE ------------------------------*/
#if 1
		  if(buff_process_toggle == 1){ /* spusteni v momente naplneni celeho adc buffer (vsech 3)*/

			  if(current_mode == AC){		/*---------------current_mode == DC ------------------------*/

				  if (change_flag == 1){
					  Generate_sin();
					  change_flag = 0;
				  }
				  for(i = 0;i < (samp_num-1); i++){
					  /*pouziti novych kopii sin signalu ke cross korelaci*/
					  y_output_sin_copy [i] = y_output_sin[i];
					  y_output_sin_copy_2 [i] = y_output_sin[i];
					  y_output_sin_copy_3 [i] = y_output_sin[i];
					  /*ulozeni poslednich 64 vzorku */
					  /*priklad: 1024 ADC_BUF_LEN, 64 DATA_LEN, i = 0 -> 960 prvek*/
					  /*priklad: 1024 ADC_BUF_LEN, 64 DATA_LEN, i = 63 -> 1023 prvek*/
					  buff_short_adc_1[i] = adc_buf_1[ADC_BUF_LEN-(samp_num - i)];
					  buff_short_adc_2[i] = adc_buf_2[ADC_BUF_LEN-(samp_num - i)];
					  buff_short_adc_3[i] = adc_buf_3[ADC_BUF_LEN-(samp_num - i)];

				  }


				 //HAL_GPIO_WritePin(LD6_GPIO_Port, LD6_Pin, 1);
#ifndef FLOAT
				 arm_correlate_q31(buff_short_adc_1,samp_num,&y_output_sin_copy,samp_num,&corr_out_sum);
				 //arm_max_q31(&corr_out,2*DATA_LEN,&sum_adc, &ind_max);
				 sum_adc = corr_out_sum[samp_num-1];

				 arm_correlate_q31(buff_short_adc_2,samp_num,&y_output_sin_copy_2,samp_num,&corr_out_x);
				 //arm_max_q31(&corr_out,2*DATA_LEN,&x_adc, &ind_max);
				 x_adc = corr_out_x[samp_num-1];

				 arm_correlate_q31(buff_short_adc_3,samp_num,&y_output_sin_copy_3,samp_num,&corr_out_y);
				 //arm_max_q31(&corr_out,2*DATA_LEN,&y_adc, &ind_max);
				 y_adc = corr_out_y[samp_num-1];

#else
				 arm_correlate_f32(&buff_short_adc_1,DATA_LEN,&y_output_sin_copy,DATA_LEN,corr_out);
				 //arm_max_f32(&corr_out,2*DATA_LEN,&sum_adc, &ind_max);
				 sum_adc = corr_out[DATA_LEN];

				 arm_correlate_f32(&buff_short_adc_2,DATA_LEN,&y_output_sin_copy_2,DATA_LEN,&corr_out);
				 //arm_max_f32(&corr_out,2*DATA_LEN,&x_adc, &ind_max);
				 x_adc = corr_out[DATA_LEN];

				 arm_correlate_f32(&buff_short_adc_3,DATA_LEN,&y_output_sin_copy_3,DATA_LEN,&corr_out);
				 //arm_max_f32(&corr_out,2*DATA_LEN,&y_adc, &ind_max);
				 y_adc = corr_out[DATA_LEN];
#endif


#ifdef KOROUT /* ---------- PRIME vystupy z korelaci -----------*/
			 sprintf(buff_1,"%06d %06d %06d\n", sum_adc, x_adc , y_adc);
			 CDC_Transmit_FS(buff_1,21);
#else		/* ----------  vystupy po deleni -----------*/
#ifndef FLOAT
			 x_out = (float)x_adc/(float)sum_adc; // 2147483648 se vyrusi delenim
			 y_out = (float)y_adc/(float)sum_adc;
#else
			 x_out = x_adc/sum_adc;
			 y_out = y_adc/sum_adc;
#endif
			 tmpSign_X = (x_out < 0) ? "-" : "+";
			 tmpVal = (x_out < 0) ? -x_out : x_out; // ze zaporneho cisla kladne - info o znamenku v tmpSign_X

			 //tmpInt1_X = (tmpVal < 1)? tmpVal : 1; // pokud tmpVal vetsi jak 1 tak SATURACE na 1 - teroreticky by nikdy nemelo dojit
			 tmpInt1_X = tmpVal;
			 tmpFrac = tmpVal - tmpInt1_X;
			 tmpInt2_X = trunc(tmpFrac * 1000000);

			 /* ---- vytvoreni retezcu pro Y ---*/
			 tmpSign_Y = (y_out < 0) ? "-" : "+";
			 tmpVal = (y_out < 0) ? -y_out : y_out;

			 //tmpInt1_Y = (tmpVal < 1)? tmpVal : 30;
			 tmpInt1_Y = tmpVal;
			 tmpFrac = tmpVal - tmpInt1_Y;
			 tmpInt2_Y = trunc(tmpFrac * 1000000);


			 /*---- %06d => 6 cisel, pro cisla s mensim poctem cifer dopleneni 0 vlevo--*/
			 sprintf(buff_1,"X %s%d.%06d Y %s%d.%06d\r\n", tmpSign_X, tmpInt1_X, tmpInt2_X, tmpSign_Y, tmpInt1_Y, tmpInt2_Y);
			 CDC_Transmit_FS(buff_1,26);
#endif
			  } /*----- konec AC ------*/
			  else{ /*---------------current_mode == DC ------------------------*/

				  for(i = 0;i < (ADC_BUF_LEN/2); i++){
					  buff_short_adc_1_dc[i] = (float32_t)adc_buf_1[(ADC_BUF_LEN/2) + i];
					  buff_short_adc_2_dc[i] = (float32_t)adc_buf_2[(ADC_BUF_LEN/2) + i];
					  buff_short_adc_3_dc[i] = (float32_t)adc_buf_3[(ADC_BUF_LEN/2) + i];
				  }
				  arm_rms_f32 (&buff_short_adc_1_dc,ADC_BUF_LEN/2, &(sum_adc_dc));
				  arm_rms_f32 (&buff_short_adc_2_dc,ADC_BUF_LEN/2, &x_adc_dc);
				  arm_rms_f32 (&buff_short_adc_3_dc,ADC_BUF_LEN/2, &y_adc_dc);

				  sprintf(buff_1,"%06d %06d %06d\n",(uint32_t)(sum_adc_dc*1000),(uint32_t)(1000*x_adc_dc),(uint32_t)(1000*y_adc_dc));
				  CDC_Transmit_FS(buff_1,21);
			  }
			 buff_process_toggle = 0; // nastaveni flagu
#endif
		  } /*podminka buffer toggle == 1*/
		  HAL_Delay(33);

    /* USER CODE END WHILE */

    /* USER CODE BEGIN 3 */
  }
  /* USER CODE END 3 */
}

/**
  * @brief System Clock Configuration
  * @retval None
  */
void SystemClock_Config(void)
{
  RCC_OscInitTypeDef RCC_OscInitStruct = {0};
  RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};
  RCC_PeriphCLKInitTypeDef PeriphClkInitStruct = {0};

  /** Configure the main internal regulator output voltage 
  */
  __HAL_RCC_PWR_CLK_ENABLE();
  __HAL_PWR_VOLTAGESCALING_CONFIG(PWR_REGULATOR_VOLTAGE_SCALE1);
  /** Initializes the CPU, AHB and APB busses clocks 
  */
  RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSE;
  RCC_OscInitStruct.HSEState = RCC_HSE_ON;
  RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
  RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSE;
  RCC_OscInitStruct.PLL.PLLM = 8;
  RCC_OscInitStruct.PLL.PLLN = 336;
  RCC_OscInitStruct.PLL.PLLP = RCC_PLLP_DIV2;
  RCC_OscInitStruct.PLL.PLLQ = 7;
  if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
  {
    Error_Handler();
  }
  /** Initializes the CPU, AHB and APB busses clocks 
  */
  RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK
                              |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
  RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;
  RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
  RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV4;
  RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV2;

  if (HAL_RCC_ClockConfig(&RCC_ClkInitStruct, FLASH_LATENCY_5) != HAL_OK)
  {
    Error_Handler();
  }
  PeriphClkInitStruct.PeriphClockSelection = RCC_PERIPHCLK_I2S;
  PeriphClkInitStruct.PLLI2S.PLLI2SN = 192;
  PeriphClkInitStruct.PLLI2S.PLLI2SR = 2;
  if (HAL_RCCEx_PeriphCLKConfig(&PeriphClkInitStruct) != HAL_OK)
  {
    Error_Handler();
  }
}

/**
  * @brief ADC1 Initialization Function
  * @param None
  * @retval None
  */
static void MX_ADC1_Init(void)
{

  /* USER CODE BEGIN ADC1_Init 0 */

  /* USER CODE END ADC1_Init 0 */

  ADC_ChannelConfTypeDef sConfig = {0};

  /* USER CODE BEGIN ADC1_Init 1 */

  /* USER CODE END ADC1_Init 1 */
  /** Configure the global features of the ADC (Clock, Resolution, Data Alignment and number of conversion) 
  */
  hadc1.Instance = ADC1;
  hadc1.Init.ClockPrescaler = ADC_CLOCK_SYNC_PCLK_DIV4;
  hadc1.Init.Resolution = ADC_RESOLUTION_12B;
  hadc1.Init.ScanConvMode = DISABLE;
  hadc1.Init.ContinuousConvMode = ENABLE;
  hadc1.Init.DiscontinuousConvMode = DISABLE;
  hadc1.Init.ExternalTrigConvEdge = ADC_EXTERNALTRIGCONVEDGE_NONE;
  hadc1.Init.ExternalTrigConv = ADC_SOFTWARE_START;
  hadc1.Init.DataAlign = ADC_DATAALIGN_RIGHT;
  hadc1.Init.NbrOfConversion = 1;
  hadc1.Init.DMAContinuousRequests = ENABLE;
  hadc1.Init.EOCSelection = ADC_EOC_SINGLE_CONV;
  if (HAL_ADC_Init(&hadc1) != HAL_OK)
  {
    Error_Handler();
  }
  /** Configure for the selected ADC regular channel its corresponding rank in the sequencer and its sample time. 
  */
  sConfig.Channel = ADC_CHANNEL_11;
  sConfig.Rank = 1;
  sConfig.SamplingTime = ADC_SAMPLETIME_3CYCLES;
  if (HAL_ADC_ConfigChannel(&hadc1, &sConfig) != HAL_OK)
  {
    Error_Handler();
  }
  /* USER CODE BEGIN ADC1_Init 2 */

  /* USER CODE END ADC1_Init 2 */

}

/**
  * @brief ADC2 Initialization Function
  * @param None
  * @retval None
  */
static void MX_ADC2_Init(void)
{

  /* USER CODE BEGIN ADC2_Init 0 */

  /* USER CODE END ADC2_Init 0 */

  ADC_ChannelConfTypeDef sConfig = {0};

  /* USER CODE BEGIN ADC2_Init 1 */

  /* USER CODE END ADC2_Init 1 */
  /** Configure the global features of the ADC (Clock, Resolution, Data Alignment and number of conversion) 
  */
  hadc2.Instance = ADC2;
  hadc2.Init.ClockPrescaler = ADC_CLOCK_SYNC_PCLK_DIV4;
  hadc2.Init.Resolution = ADC_RESOLUTION_12B;
  hadc2.Init.ScanConvMode = DISABLE;
  hadc2.Init.ContinuousConvMode = ENABLE;
  hadc2.Init.DiscontinuousConvMode = DISABLE;
  hadc2.Init.ExternalTrigConvEdge = ADC_EXTERNALTRIGCONVEDGE_NONE;
  hadc2.Init.ExternalTrigConv = ADC_SOFTWARE_START;
  hadc2.Init.DataAlign = ADC_DATAALIGN_RIGHT;
  hadc2.Init.NbrOfConversion = 1;
  hadc2.Init.DMAContinuousRequests = ENABLE;
  hadc2.Init.EOCSelection = ADC_EOC_SINGLE_CONV;
  if (HAL_ADC_Init(&hadc2) != HAL_OK)
  {
    Error_Handler();
  }
  /** Configure for the selected ADC regular channel its corresponding rank in the sequencer and its sample time. 
  */
  sConfig.Channel = ADC_CHANNEL_3;
  sConfig.Rank = 1;
  sConfig.SamplingTime = ADC_SAMPLETIME_3CYCLES;
  if (HAL_ADC_ConfigChannel(&hadc2, &sConfig) != HAL_OK)
  {
    Error_Handler();
  }
  /* USER CODE BEGIN ADC2_Init 2 */

  /* USER CODE END ADC2_Init 2 */

}

/**
  * @brief ADC3 Initialization Function
  * @param None
  * @retval None
  */
static void MX_ADC3_Init(void)
{

  /* USER CODE BEGIN ADC3_Init 0 */

  /* USER CODE END ADC3_Init 0 */

  ADC_ChannelConfTypeDef sConfig = {0};

  /* USER CODE BEGIN ADC3_Init 1 */

  /* USER CODE END ADC3_Init 1 */
  /** Configure the global features of the ADC (Clock, Resolution, Data Alignment and number of conversion) 
  */
  hadc3.Instance = ADC3;
  hadc3.Init.ClockPrescaler = ADC_CLOCK_SYNC_PCLK_DIV4;
  hadc3.Init.Resolution = ADC_RESOLUTION_12B;
  hadc3.Init.ScanConvMode = DISABLE;
  hadc3.Init.ContinuousConvMode = ENABLE;
  hadc3.Init.DiscontinuousConvMode = DISABLE;
  hadc3.Init.ExternalTrigConvEdge = ADC_EXTERNALTRIGCONVEDGE_NONE;
  hadc3.Init.ExternalTrigConv = ADC_SOFTWARE_START;
  hadc3.Init.DataAlign = ADC_DATAALIGN_RIGHT;
  hadc3.Init.NbrOfConversion = 1;
  hadc3.Init.DMAContinuousRequests = ENABLE;
  hadc3.Init.EOCSelection = ADC_EOC_SINGLE_CONV;
  if (HAL_ADC_Init(&hadc3) != HAL_OK)
  {
    Error_Handler();
  }
  /** Configure for the selected ADC regular channel its corresponding rank in the sequencer and its sample time. 
  */
  sConfig.Channel = ADC_CHANNEL_1;
  sConfig.Rank = 1;
  sConfig.SamplingTime = ADC_SAMPLETIME_3CYCLES;
  if (HAL_ADC_ConfigChannel(&hadc3, &sConfig) != HAL_OK)
  {
    Error_Handler();
  }
  /* USER CODE BEGIN ADC3_Init 2 */

  /* USER CODE END ADC3_Init 2 */

}

/**
  * @brief I2C1 Initialization Function
  * @param None
  * @retval None
  */
static void MX_I2C1_Init(void)
{

  /* USER CODE BEGIN I2C1_Init 0 */

  /* USER CODE END I2C1_Init 0 */

  /* USER CODE BEGIN I2C1_Init 1 */

  /* USER CODE END I2C1_Init 1 */
  hi2c1.Instance = I2C1;
  hi2c1.Init.ClockSpeed = 100000;
  hi2c1.Init.DutyCycle = I2C_DUTYCYCLE_2;
  hi2c1.Init.OwnAddress1 = 0;
  hi2c1.Init.AddressingMode = I2C_ADDRESSINGMODE_7BIT;
  hi2c1.Init.DualAddressMode = I2C_DUALADDRESS_DISABLE;
  hi2c1.Init.OwnAddress2 = 0;
  hi2c1.Init.GeneralCallMode = I2C_GENERALCALL_DISABLE;
  hi2c1.Init.NoStretchMode = I2C_NOSTRETCH_DISABLE;
  if (HAL_I2C_Init(&hi2c1) != HAL_OK)
  {
    Error_Handler();
  }
  /* USER CODE BEGIN I2C1_Init 2 */

  /* USER CODE END I2C1_Init 2 */

}

/**
  * @brief I2S3 Initialization Function
  * @param None
  * @retval None
  */
static void MX_I2S3_Init(void)
{

  /* USER CODE BEGIN I2S3_Init 0 */

  /* USER CODE END I2S3_Init 0 */

  /* USER CODE BEGIN I2S3_Init 1 */

  /* USER CODE END I2S3_Init 1 */
  hi2s3.Instance = SPI3;
  hi2s3.Init.Mode = I2S_MODE_MASTER_TX;
  hi2s3.Init.Standard = I2S_STANDARD_PHILIPS;
  hi2s3.Init.DataFormat = I2S_DATAFORMAT_16B;
  hi2s3.Init.MCLKOutput = I2S_MCLKOUTPUT_ENABLE;
  hi2s3.Init.AudioFreq = I2S_AUDIOFREQ_8K;
  hi2s3.Init.CPOL = I2S_CPOL_LOW;
  hi2s3.Init.ClockSource = I2S_CLOCK_PLL;
  hi2s3.Init.FullDuplexMode = I2S_FULLDUPLEXMODE_DISABLE;
  if (HAL_I2S_Init(&hi2s3) != HAL_OK)
  {
    Error_Handler();
  }
  /* USER CODE BEGIN I2S3_Init 2 */

  /* USER CODE END I2S3_Init 2 */

}

/**
  * @brief SPI1 Initialization Function
  * @param None
  * @retval None
  */
static void MX_SPI1_Init(void)
{

  /* USER CODE BEGIN SPI1_Init 0 */

  /* USER CODE END SPI1_Init 0 */

  /* USER CODE BEGIN SPI1_Init 1 */

  /* USER CODE END SPI1_Init 1 */
  /* SPI1 parameter configuration*/
  hspi1.Instance = SPI1;
  hspi1.Init.Mode = SPI_MODE_MASTER;
  hspi1.Init.Direction = SPI_DIRECTION_2LINES;
  hspi1.Init.DataSize = SPI_DATASIZE_8BIT;
  hspi1.Init.CLKPolarity = SPI_POLARITY_LOW;
  hspi1.Init.CLKPhase = SPI_PHASE_1EDGE;
  hspi1.Init.NSS = SPI_NSS_SOFT;
  hspi1.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_2;
  hspi1.Init.FirstBit = SPI_FIRSTBIT_MSB;
  hspi1.Init.TIMode = SPI_TIMODE_DISABLE;
  hspi1.Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
  hspi1.Init.CRCPolynomial = 10;
  if (HAL_SPI_Init(&hspi1) != HAL_OK)
  {
    Error_Handler();
  }
  /* USER CODE BEGIN SPI1_Init 2 */

  /* USER CODE END SPI1_Init 2 */

}

/** 
  * Enable DMA controller clock
  */
static void MX_DMA_Init(void) 
{

  /* DMA controller clock enable */
  __HAL_RCC_DMA2_CLK_ENABLE();

  /* DMA interrupt init */
  /* DMA2_Stream0_IRQn interrupt configuration */
  HAL_NVIC_SetPriority(DMA2_Stream0_IRQn, 0, 0);
  HAL_NVIC_EnableIRQ(DMA2_Stream0_IRQn);
  /* DMA2_Stream1_IRQn interrupt configuration */
  HAL_NVIC_SetPriority(DMA2_Stream1_IRQn, 0, 0);
  HAL_NVIC_EnableIRQ(DMA2_Stream1_IRQn);
  /* DMA2_Stream2_IRQn interrupt configuration */
  HAL_NVIC_SetPriority(DMA2_Stream2_IRQn, 0, 0);
  HAL_NVIC_EnableIRQ(DMA2_Stream2_IRQn);

}

/**
  * @brief GPIO Initialization Function
  * @param None
  * @retval None
  */
static void MX_GPIO_Init(void)
{
  GPIO_InitTypeDef GPIO_InitStruct = {0};

  /* GPIO Ports Clock Enable */
  __HAL_RCC_GPIOE_CLK_ENABLE();
  __HAL_RCC_GPIOC_CLK_ENABLE();
  __HAL_RCC_GPIOH_CLK_ENABLE();
  __HAL_RCC_GPIOA_CLK_ENABLE();
  __HAL_RCC_GPIOB_CLK_ENABLE();
  __HAL_RCC_GPIOD_CLK_ENABLE();

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(CS_I2C_SPI_GPIO_Port, CS_I2C_SPI_Pin, GPIO_PIN_RESET);

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(OTG_FS_PowerSwitchOn_GPIO_Port, OTG_FS_PowerSwitchOn_Pin, GPIO_PIN_SET);

  /*Configure GPIO pin Output Level */
  HAL_GPIO_WritePin(GPIOD, LD4_Pin|LD3_Pin|LD5_Pin|LD6_Pin 
                          |Audio_RST_Pin, GPIO_PIN_RESET);

  /*Configure GPIO pins : PE2 PE4 PE5 PE6 
                           PE7 PE8 PE9 PE10 
                           PE11 PE12 PE13 PE14 
                           PE15 PE0 */
  GPIO_InitStruct.Pin = GPIO_PIN_2|GPIO_PIN_4|GPIO_PIN_5|GPIO_PIN_6 
                          |GPIO_PIN_7|GPIO_PIN_8|GPIO_PIN_9|GPIO_PIN_10 
                          |GPIO_PIN_11|GPIO_PIN_12|GPIO_PIN_13|GPIO_PIN_14 
                          |GPIO_PIN_15|GPIO_PIN_0;
  GPIO_InitStruct.Mode = GPIO_MODE_ANALOG;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(GPIOE, &GPIO_InitStruct);

  /*Configure GPIO pin : CS_I2C_SPI_Pin */
  GPIO_InitStruct.Pin = CS_I2C_SPI_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(CS_I2C_SPI_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : PC13 PC2 PC4 PC5 
                           PC6 PC8 PC9 PC11 */
  GPIO_InitStruct.Pin = GPIO_PIN_13|GPIO_PIN_2|GPIO_PIN_4|GPIO_PIN_5 
                          |GPIO_PIN_6|GPIO_PIN_8|GPIO_PIN_9|GPIO_PIN_11;
  GPIO_InitStruct.Mode = GPIO_MODE_ANALOG;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);

  /*Configure GPIO pin : OTG_FS_PowerSwitchOn_Pin */
  GPIO_InitStruct.Pin = OTG_FS_PowerSwitchOn_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(OTG_FS_PowerSwitchOn_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : PDM_OUT_Pin */
  GPIO_InitStruct.Pin = PDM_OUT_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF5_SPI2;
  HAL_GPIO_Init(PDM_OUT_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : B1_Pin */
  GPIO_InitStruct.Pin = B1_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_EVT_RISING;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(B1_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : PA2 PA8 PA15 */
  GPIO_InitStruct.Pin = GPIO_PIN_2|GPIO_PIN_8|GPIO_PIN_15;
  GPIO_InitStruct.Mode = GPIO_MODE_ANALOG;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(GPIOA, &GPIO_InitStruct);

  /*Configure GPIO pins : PB0 PB1 PB11 PB12 
                           PB13 PB14 PB15 PB4 
                           PB5 PB7 PB8 */
  GPIO_InitStruct.Pin = GPIO_PIN_0|GPIO_PIN_1|GPIO_PIN_11|GPIO_PIN_12 
                          |GPIO_PIN_13|GPIO_PIN_14|GPIO_PIN_15|GPIO_PIN_4 
                          |GPIO_PIN_5|GPIO_PIN_7|GPIO_PIN_8;
  GPIO_InitStruct.Mode = GPIO_MODE_ANALOG;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(GPIOB, &GPIO_InitStruct);

  /*Configure GPIO pin : BOOT1_Pin */
  GPIO_InitStruct.Pin = BOOT1_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(BOOT1_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : CLK_IN_Pin */
  GPIO_InitStruct.Pin = CLK_IN_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  GPIO_InitStruct.Alternate = GPIO_AF5_SPI2;
  HAL_GPIO_Init(CLK_IN_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pins : PD8 PD9 PD10 PD11 
                           PD0 PD1 PD2 PD3 
                           PD6 PD7 */
  GPIO_InitStruct.Pin = GPIO_PIN_8|GPIO_PIN_9|GPIO_PIN_10|GPIO_PIN_11 
                          |GPIO_PIN_0|GPIO_PIN_1|GPIO_PIN_2|GPIO_PIN_3 
                          |GPIO_PIN_6|GPIO_PIN_7;
  GPIO_InitStruct.Mode = GPIO_MODE_ANALOG;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(GPIOD, &GPIO_InitStruct);

  /*Configure GPIO pins : LD4_Pin LD3_Pin LD5_Pin LD6_Pin 
                           Audio_RST_Pin */
  GPIO_InitStruct.Pin = LD4_Pin|LD3_Pin|LD5_Pin|LD6_Pin 
                          |Audio_RST_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
  HAL_GPIO_Init(GPIOD, &GPIO_InitStruct);

  /*Configure GPIO pin : OTG_FS_OverCurrent_Pin */
  GPIO_InitStruct.Pin = OTG_FS_OverCurrent_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(OTG_FS_OverCurrent_GPIO_Port, &GPIO_InitStruct);

  /*Configure GPIO pin : MEMS_INT2_Pin */
  GPIO_InitStruct.Pin = MEMS_INT2_Pin;
  GPIO_InitStruct.Mode = GPIO_MODE_EVT_RISING;
  GPIO_InitStruct.Pull = GPIO_NOPULL;
  HAL_GPIO_Init(MEMS_INT2_GPIO_Port, &GPIO_InitStruct);

}

/* USER CODE BEGIN 4 */

/* USER CODE END 4 */

/**
  * @brief  This function is executed in case of error occurrence.
  * @retval None
  */
void Error_Handler(void)
{
  /* USER CODE BEGIN Error_Handler_Debug */
  /* User can add his own implementation to report the HAL error return state */

  /* USER CODE END Error_Handler_Debug */
}

#ifdef  USE_FULL_ASSERT
/**
  * @brief  Reports the name of the source file and the source line number
  *         where the assert_param error has occurred.
  * @param  file: pointer to the source file name
  * @param  line: assert_param error line source number
  * @retval None
  */
void assert_failed(uint8_t *file, uint32_t line)
{ 
  /* USER CODE BEGIN 6 */
  /* User can add his own implementation to report the file name and line number,
     tex: printf("Wrong parameters value: file %s on line %d\r\n", file, line) */
  /* USER CODE END 6 */
}
#endif /* USE_FULL_ASSERT */

/************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/
